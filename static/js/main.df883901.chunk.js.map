{"version":3,"sources":["contents/metrics_list.fr.yml","logo.svg","helpers/stateHelpers.js","helpers/client.js","state/duckData.js","state/duckUi.js","components/StepNav.js","components/StepContainer.js","helpers/translate.js","components/ContinueButton.js","components/Header.js","contents/global_intro.md","constants.js","components/StepDataikuIntro.js","contents/first_part.md","components/StepEuLegislation.js","contents/principles_eu.md","components/StepMetricsIntro.js","contents/metrics_explanation.md","components/SortScreen.js","helpers/sorting.js","components/MetricsCrossingIndicator.js","components/BrushableScatterPlot.js","components/VariableInputs.js","helpers/filters.js","components/FilterForm.js","helpers/hooks.js","components/MainChoiceScreen.js","components/SecondChoiceScreen.js","components/DataikuInputs.js","components/SingleChoiceScreen.js","state/duckHistory.js","helpers/download.js","components/History.js","components/StepConclusion.js","components/Container.js","state/rootReducer.js","state/promiseMiddleware.js","App.js","state/store.js","reportWebVitals.js","index.js","contents/variables_list.fr.yml","contents/messages.fr.yml"],"names":["module","exports","setPropInState","actionName","payload","state","varName","replace","toLowerCase","a","b","substr","toUpperCase","fetchData","Promise","resolve","reject","get","process","then","data","map","datum","id","variables","nom_modele","split","undefined","formatModels","csvParse","catch","GET_DATA","SET_METRICS_ORDER","ADD_FILTERS","SET_CHOOSEN_MODEL","SET_DATAIKU_RESULTS","RESET_APP","resetApp","type","getData","promise","setMetricsOrder","addFilters","setChoosenModel","setDataikuResults","DEFAULT_STATE","models","metricsOrder","metrics","filters","choosenModel","dataikuResults","action","result","SET_METRICS_ORDER_IS_VALIDATED","selector","createStructuredSelector","SET_CURRENT_STEP","SET_NUMBER_OF_STEPS","SET_MAIN_CHOICE_IS_VALIDATED","START_APP","setCurrentStep","setNumberOfSteps","setMetricsOrderIsValidated","setMainChoiceIsValidated","startApp","currentStep","numberOfSteps","metricsOrderIsValidated","mainChoiceIsValidated","ui","StepNav","useState","steps","setSteps","useMemo","newSteps","Array","i","length","className","_s","index","cx","active","onClick","visibleStyle","opacity","maxHeight","minHeight","hiddenStyle","transitionStyles","entering","entered","exiting","exited","StepContainer","children","style","otherProps","Transition","in","timeout","translate","key","lang","messagesFr","console","warn","ContinueButton","disabled","connect","ownProps","uiDuck","dispatch","bindActionCreators","source","dataDuck","onDragEnd","destination","items","list","startIndex","endIndex","from","splice","removed","reorder","STEP_METRICS_SORTING","droppableId","provided","snapshot","droppableProps","ref","innerRef","isDraggingOver","background","padding","width","item","draggableId","name","draggableProps","dragHandleProps","isDragging","draggableStyle","userSelect","grid","margin","placeholder","STEP_MAIN_CHOICE","MetricsCrossingIndicator","metric","BrushableScatterPlot","xVariable","yVariable","filteredVariables","height","axisMargin","brush","x","xMinOriginal","xMaxOriginal","y","yMinOriginal","yMaxOriginal","onBrushChange","readOnly","minified","highlightedNodeId","xMin","xMax","setXRange","yMin","yMax","setYRange","numberOfTicks","useEffect","xAccessor","d","filter","vName","includes","yAccessor","xExtent","extent","yExtent","xScale","scaleLinear","domain","range","yScale","reverse","hoveredElement","setHoveredElement","tooltipPosition","setTooltipPosition","isBrushing","setIsBrushing","svgRef","useRef","handleMouseUp","toFixed","sort","onMouseDown","e","svgDims","current","getBoundingClientRect","thatX","invert","clientX","thatY","clientY","onMouseMove","onMouseUp","onMouseLeave","transform","axisPropsFromTickScale","orient","BOTTOM","LEFT","min","Math","abs","fill","handleOvered","cy","onMouseEnter","r","left","top","join","Range","Slider","createSliderWithTooltip","Input","onChange","validate","value","props","localValue","setLocalValue","target","onBlur","VariableInputs","values","max","onRangeChange","onFilteredVariablesChange","selected","reduce","res","SLIDER_MULTIPLIER","newVariables","thatId","checked","val","isNaN","allowCross","tipFormatter","thatMin","thatMax","step","defaultValue","filterModels","model","variable","FilterForm","onSubmit","metric1","metric2","defaultFilteredVariables","relates_to_privacy","absoluteMin1","setAbsoluteMin1","absoluteMax2","setAbsoluteMax2","setFilteredVariables","absoluteMin2","setAbsoluteMin2","absoluteMax1","setAbsoluteMax1","choosenMin1","setChoosenMin1","choosenMax2","setChoosenMax2","choosenMin2","setChoosenMin2","choosenMax1","setChoosenMax1","filteredModels","setFilteredModels","hasVariables","find","v","fn","delay","handler","setTimeout","clearTimeout","useDebounce","theseFilters","absMin1","absMax1","absMin2","absMax2","preventDefault","thatXMin","thatXMax","thatYMin","thatYMax","theseVars","m","slice","filter1","filter2","0","1","STEP_SECONDARY_CHOICE_1","metricsExtent","fromMetric","toMetric","previousExtents","nextStep","to","theseVariables","f","Object","entries","setData","handleSubmit","metricsList","log","setHighlightedNodeId","visibleModels","privacyVariables","onMouseOver","STEP_DATAIKU_FEEDBACK","history","date","Date","downloadFile","text","extension","fileName","blob","Blob","FileSaver","saveAs","actionsSerialization","description","serializeStep","History","renderAction","csv","toLocaleTimeString","historyDuck","renderStep","stepIndex","StepDataikuIntro","StepEuLegislation","StepMetricsIntro","s","rememberReducer","combineReducers","promiseMiddleware","getState","next","rest","REQUEST","SUCCESS","FAIL","RESET","error","store","initialState","middleware","applyMiddleware","createStoreWithMiddleware","window","__REDUX_DEVTOOLS_EXTENSION__","compose","rememberEnhancer","localStorage","createStore","rootReducer","configureStore","App","Helmet","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.df883901.chunk.js","sourcesContent":["module.exports = [{\"name\":\"Performance\",\"id\":\"Performance\",\"short_description\":\"L'AUC mesure la performance de l'algorithme. Comme traditionnellement dans l’industrie du Machine Learning, on supposera que le data scientist banquier est d’abord incité sur le critère de la performance de son algorithme car l’AUC est proportionnel au gain financier procuré par l’algorithme.\"},{\"name\":\"Disparate impact sur le genre\",\"id\":\"fairness_disparate_impact\",\"short_description\":\"il s’agit d’un ratio entre le pourcentage d’acceptation chez les femmes et le pourcentage d’acceptation chez les hommes. Lorsque ce ratio est égal à 1, on considérera qu’il n’y pas d’effet disparate entre les hommes et les femmes. Attention, un effet disparate très différent de 1 ne signifie pas qu’il y a différence de traitement. Un effet disparate dit simplement que l’on constate deux effets différents entre les hommes et les femmes sans s’intéresser aux causes de cet effet (le traitement). La différence de traitement peut se tester avec des analyses toute chose égale par ailleurs (testing de CV par exemple).\"},{\"name\":\"Distribution des erreurs entre hommes et femmes\",\"id\":\"fairness_accuracy\",\"short_description\":\"Une autre manière complémentaire de s’intéresser aux discriminations algorithmiques est de de s’intéresser à la distribution des erreurs entre hommes et femmes. L’erreur dans l’allocation du droit au crédit peut pénaliser les individus dans leur capacité d’agir (acheter une maison, voiture, etc). Il est donc primordial que celle-ci soit distribué de la même manière entre les hommes et les femmes. L’indicateur de la précision mesure le taux de prédictions corrects (c’est-à-dire vrais positifs + vrais négatifs). Une manière de mesurer la différence entre ces taux est de faire la soustraction entre la précision chez les hommes et la précision entre les femmes.\"},{\"name\":\"Privacy\",\"id\":\"Privacy\",\"type\":\"integer\",\"short_description\":\"Selon les conventions des droits de l’hommes, chaque individu a le droit de disposer de ses données personnelles. Selon la RGPD, il faut donc veiller à ce que ces données privées soient récoltées de manière parcimonieuse (principe de minimisation), pour des finalités bien déterminées (principe de finalité), limiter les failles de sécurité, les fuites possibles, etc, Nous prendrons l’opposé du nombre de variables personnelles comme proxy de la privacy. Les 11 variables personnelles sont present_emp_since, sex, personal.\\\\_status, present_res_since ,property, age, housing, job, people_under_maintenance, telephone, foreign_worker. Le nombre de variables privées est également un proxy de la vulnérabilité aux failles de sécurité par attaques (sécurité).\"},{\"name\":\"Interprétabilité\",\"id\":\"Interpretability\",\"type\":\"integer\",\"short_description\":\"Selon la législation (RGPD), les demandeurs ont le droit d'exiger une explication des décisions. On considèrera que l’opposé du nombre total de variables dans le modèle comme un proxy de l’interprétabilité des algorithmes. En effet, des explications avec 20 variables seront beaucoup plus difficiles à fournir qu’une explication avec 5 variables.\"}]","export default __webpack_public_path__ + \"static/media/logo.103b5fa1.svg\";","export const setPropInState = (actionName, payload, state) => {\n  const varName = actionName\n    .replace(\"SET_\", \"\")\n    .toLowerCase()\n    .replace(/(_[a-z])/gi, (a, b) => b.substr(1).toUpperCase());\n  return {\n    ...state,\n    [varName]: payload,\n  };\n};\n","import get from \"axios\";\nimport { csvParse } from \"d3-dsv\";\nimport { uniq } from \"lodash\";\n\nconst formatModels = (data) => {\n  return data.map((datum, id) => {\n    return {\n      ...datum,\n      variables: datum.nom_modele.split(\" \"),\n      nom_modele: undefined,\n      id,\n    };\n  });\n};\n\nexport const fetchData = () =>\n  new Promise((resolve, reject) => {\n    get(`${process.env.PUBLIC_URL}/models-sample.csv`)\n      .then(({ data }) => {\n        resolve(formatModels(csvParse(data)));\n      })\n      .catch(reject);\n  });\n","// import { combineReducers } from 'redux';\nimport { createStructuredSelector } from \"reselect\";\nimport { fetchData } from \"../helpers/client\";\nimport { setPropInState } from \"../helpers/stateHelpers\";\n\nimport metrics from \"../contents/metrics_list.fr.yml\";\n\n/**\n * ACTION NAMES\n */\nimport { SET_METRICS_ORDER_IS_VALIDATED } from \"./duckUi\";\nconst GET_DATA = \"GET_DATA\";\nexport const SET_METRICS_ORDER = \"SET_METRICS_ORDER\";\nexport const ADD_FILTERS = \"ADD_FILTERS\";\nexport const SET_CHOOSEN_MODEL = \"SET_CHOOSEN_MODEL\";\nexport const SET_DATAIKU_RESULTS = \"SET_DATAIKU_RESULTS\";\nexport const RESET_APP = \"RESET_APP\";\n\n/**\n * ACTION FUNCTIONS\n */\nexport const resetApp = () => ({\n  type: RESET_APP,\n});\nexport const getData = (payload) => ({\n  type: GET_DATA,\n  payload,\n  promise: () => fetchData(),\n});\n\nexport const setMetricsOrder = (payload) => ({\n  type: SET_METRICS_ORDER,\n  payload,\n});\n\nexport const addFilters = (payload) => ({\n  type: ADD_FILTERS,\n  payload,\n});\n\nexport const setChoosenModel = (payload) => ({\n  type: SET_CHOOSEN_MODEL,\n  payload,\n});\n\nexport const setDataikuResults = (payload) => ({\n  type: SET_DATAIKU_RESULTS,\n  payload,\n});\n\n/**\n * REDUCER\n */\nconst DEFAULT_STATE = {\n  models: [],\n  metricsOrder: [...metrics],\n  filters: {},\n  choosenModel: undefined,\n  dataikuResults: {},\n};\n\nfunction data(state = DEFAULT_STATE, action) {\n  const { payload, result } = action;\n  switch (action.type) {\n    case RESET_APP:\n      return {\n        ...DEFAULT_STATE,\n        models: state.models,\n      };\n    case `${GET_DATA}`:\n      return state;\n    case `${GET_DATA}_SUCCESS`:\n      return {\n        ...state,\n        models: result,\n      };\n    case `${GET_DATA}_ERROR`:\n      return state;\n    case SET_METRICS_ORDER:\n      return setPropInState(action.type, payload, state);\n    case ADD_FILTERS:\n      return {\n        ...state,\n        filters: {\n          ...state.filters,\n          ...payload,\n        },\n      };\n    // reset filters cases\n    case SET_METRICS_ORDER_IS_VALIDATED:\n      return {\n        ...state,\n        filters: DEFAULT_STATE.filters,\n      };\n    case SET_DATAIKU_RESULTS:\n    case SET_CHOOSEN_MODEL:\n      return setPropInState(action.type, payload, state);\n    default:\n      return state;\n  }\n}\n\n// export default combineReducers({data, ...})\nexport default data;\n\n/**\n * SELECTOR\n */\n\nconst models = (state) => state.models;\nconst metricsOrder = (state) => state.metricsOrder;\nconst filters = (state) => state.filters;\nconst choosenModel = (state) => state.choosenModel;\nconst dataikuResults = (state) => state.dataikuResults;\n\nexport const selector = createStructuredSelector({\n  models,\n  metricsOrder,\n  filters,\n  choosenModel,\n  dataikuResults,\n});\n","// import { combineReducers } from 'redux';\nimport { createStructuredSelector } from \"reselect\";\nimport { setPropInState } from \"../helpers/stateHelpers\";\n/**\n * ACTION NAMES\n */\nimport { SET_METRICS_ORDER, RESET_APP } from \"./duckData\";\nexport const SET_CURRENT_STEP = \"SET_CURRENT_STEP\";\nconst SET_NUMBER_OF_STEPS = \"SET_NUMBER_OF_STEPS\";\nexport const SET_METRICS_ORDER_IS_VALIDATED = \"SET_METRICS_ORDER_IS_VALIDATED\";\nexport const SET_MAIN_CHOICE_IS_VALIDATED = \"SET_MAIN_CHOICE_IS_VALIDATED\";\nexport const START_APP = \"START_APP\";\n\n/**\n * ACTION FUNCTIONS\n */\nexport const setCurrentStep = (payload) => ({\n  type: SET_CURRENT_STEP,\n  payload,\n});\n\nexport const setNumberOfSteps = (payload) => ({\n  type: SET_NUMBER_OF_STEPS,\n  payload,\n});\nexport const setMetricsOrderIsValidated = (payload) => ({\n  type: SET_METRICS_ORDER_IS_VALIDATED,\n  payload,\n});\nexport const setMainChoiceIsValidated = (payload) => ({\n  type: SET_MAIN_CHOICE_IS_VALIDATED,\n  payload,\n});\n\nexport const startApp = (payload) => ({\n  type: START_APP,\n  payload,\n});\n\n/**\n * REDUCER\n */\nconst DEFAULT_STATE = {\n  currentStep: 0,\n  numberOfSteps: 5,\n  metricsOrderIsValidated: false,\n  mainChoiceIsValidated: false,\n};\n\nfunction ui(state = DEFAULT_STATE, action) {\n  const { payload } = action;\n  switch (action.type) {\n    case RESET_APP:\n      return DEFAULT_STATE;\n    case SET_CURRENT_STEP:\n    case SET_NUMBER_OF_STEPS:\n      return setPropInState(action.type, payload, state);\n    case SET_METRICS_ORDER_IS_VALIDATED:\n      return {\n        ...state,\n        metricsOrderIsValidated: payload,\n        mainChoiceIsValidated: payload ? state.mainChoiceIsValidated : false,\n      };\n    case SET_MAIN_CHOICE_IS_VALIDATED:\n      return {\n        ...state,\n        mainChoiceIsValidated: payload,\n      };\n    case SET_METRICS_ORDER:\n      return {\n        ...state,\n        metricsOrderIsValidated: false,\n      };\n    default:\n      return state;\n  }\n}\n\n// export default combineReducers({data, ...})\nexport default ui;\n\n/**\n * SELECTOR\n */\n\nconst currentStep = (state) => state.currentStep;\nconst numberOfSteps = (state) => state.numberOfSteps;\nconst metricsOrderIsValidated = (state) => state.metricsOrderIsValidated;\nconst mainChoiceIsValidated = (state) => state.mainChoiceIsValidated;\n\nexport const selector = createStructuredSelector({\n  currentStep,\n  numberOfSteps,\n  metricsOrderIsValidated,\n  mainChoiceIsValidated,\n});\n","import React, { useState, useMemo } from \"react\";\nimport cx from \"classnames\";\n\nimport \"./StepNav.scss\";\n\nfunction StepNav({ currentStep, numberOfSteps, setCurrentStep }) {\n  const [steps, setSteps] = useState([]);\n  useMemo(() => {\n    let newSteps = new Array(numberOfSteps);\n    for (let i = 0; i < newSteps.length; i++) {\n      newSteps[i] = i;\n    }\n    setSteps(newSteps);\n  }, [numberOfSteps]);\n\n  return (\n    <nav className=\"step-nav\">\n      <ul className=\"step-nav-items-container\">\n        {steps.map((_s, index) => (\n          <li\n            className={cx(\"step-nav-item\", { active: index === currentStep })}\n            onClick={() => setCurrentStep(index)}\n            key={index}\n          />\n        ))}\n      </ul>\n    </nav>\n  );\n}\n\nexport default StepNav;\n","import react from \"react\";\nimport { Transition } from \"react-transition-group\";\n\nconst visibleStyle = {\n  opacity: 1,\n  maxHeight: \"calc(100vh - 4rem)\",\n  minHeight: \"calc(100vh - 4rem)\",\n};\nconst hiddenStyle = {\n  opacity: 0,\n  maxHeight: 0,\n  minHeight: 0,\n};\n\nconst transitionStyles = {\n  entering: visibleStyle,\n  entered: visibleStyle,\n  exiting: hiddenStyle,\n  exited: hiddenStyle,\n};\nconst duration = 300;\n\nfunction StepContainer({ children, active, style = {}, ...otherProps }) {\n  return (\n    <Transition in={active} timeout={duration}>\n      {(state) => (\n        <div\n          className=\"step-container\"\n          {...otherProps}\n          style={{\n            ...style,\n            ...transitionStyles[state],\n          }}\n        >\n          {children}\n        </div>\n      )}\n    </Transition>\n  );\n}\n\nexport default StepContainer;\n","import messagesFr from \"../contents/messages.fr.yml\";\n\nfunction translate(key, lang = \"fr\") {\n  if (lang === \"fr\") {\n    if (!messagesFr[key]) {\n      console.warn(\"unstranslated key: \", key);\n    }\n    return messagesFr[key] || key;\n  }\n}\n\nexport default translate;\n","import react from \"react\";\nimport translate from \"../helpers/translate\";\n\nfunction ContinueButton({ onClick, disabled }) {\n  return (\n    <div className=\"continue-button-container\">\n      <button disabled={disabled} onClick={onClick} className=\"continue-button\">\n        {translate(\"next_step\")}\n      </button>\n    </div>\n  );\n}\n\nexport default ContinueButton;\n","/* eslint import/no-webpack-loader-syntax: off */\nimport react from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport Md from \"react-markdown\";\n\nimport translate from \"../helpers/translate\";\n\nimport * as uiDuck from \"../state/duckUi\";\n\nimport intro from \"!!raw-loader!../contents/global_intro.md\";\n\nimport ContinueButton from \"./ContinueButton\";\nimport { STEP_DATAIKU_PRACTICE } from \"../constants\";\n\nfunction Header({ ui: { currentStep }, setCurrentStep }) {\n  return (\n    <header className=\"header\">\n      <h1>{translate(\"site_title\")}</h1>\n      <Md source={intro} />\n      <ContinueButton onClick={() => setCurrentStep(STEP_DATAIKU_PRACTICE)} />\n    </header>\n  );\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  ...ownProps,\n  ...state,\n  ...uiDuck.selector(state.ui),\n});\n\nconst mapDispatchToProps = (dispatch) =>\n  bindActionCreators(\n    {\n      ...uiDuck,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);\n","export default \"Vous participez à une enquête dans le cadre de la conception d’un outil de Machine Learning. Cette enquête est réalisée par l’Institut Mines-Télécom et Sciences Po dans le cadre d’un travail de recherche.\\n\";","export const STEP_HEADER = 0;\nexport const STEP_DATAIKU_PRACTICE = 1;\nexport const STEP_EU_LEGISLATION = 2;\nexport const STEP_METRICS_EXPLANATION = 3;\nexport const STEP_METRICS_SORTING = 4;\nexport const STEP_MAIN_CHOICE = 5;\nexport const STEP_SECONDARY_CHOICE_1 = 6;\nexport const STEP_SECONDARY_CHOICE_2 = 7;\nexport const STEP_MODEL_CHOICE = 8;\nexport const STEP_DATAIKU_FEEDBACK = 9;\nexport const STEP_CONCLUSION = 10;\nexport const DECIMALS = 4;\n","/* eslint import/no-webpack-loader-syntax: off */\nimport react from \"react\";\n\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport Md from \"react-markdown\";\n\nimport translate from \"../helpers/translate\";\n\nimport * as uiDuck from \"../state/duckUi\";\nimport ContinueButton from \"./ContinueButton\";\n\nimport intro from \"!!raw-loader!../contents/first_part.md\";\nimport { STEP_EU_LEGISLATION } from \"../constants\";\n\nfunction Step1({ ui: { currentStep }, setCurrentStep }) {\n  return (\n    <section className=\"step-1\">\n      <h1>{translate(\"step_1_title\")}</h1>\n      <Md source={intro} />\n\n      <ContinueButton onClick={() => setCurrentStep(STEP_EU_LEGISLATION)} />\n    </section>\n  );\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  ...ownProps,\n  ...state,\n  ...uiDuck.selector(state.ui),\n});\n\nconst mapDispatchToProps = (dispatch) =>\n  bindActionCreators(\n    {\n      ...uiDuck,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Step1);\n","export default \"Supposez que vous êtes un data scientist dans une banque et que l’on vous demande de réaliser un\\nalgorithme de ML pour la prédiction du risque de défaut de vos clients à partir d’un historique de\\ndonnées. Vous avez à disposition les données sur une interface et nous vous demandons de créer le\\nclassifieur de ML à l’aide de l’outil Dataiku.\\n\";","/* eslint import/no-webpack-loader-syntax: off */\nimport react from \"react\";\n\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport Md from \"react-markdown\";\n\nimport translate from \"../helpers/translate\";\n\nimport * as uiDuck from \"../state/duckUi\";\nimport ContinueButton from \"./ContinueButton\";\n\nimport intro from \"!!raw-loader!../contents/principles_eu.md\";\nimport { STEP_METRICS_EXPLANATION } from \"../constants\";\n\nfunction Step2({ ui: { currentStep }, setCurrentStep }) {\n  return (\n    <section className=\"step-2\">\n      <h1>{translate(\"step_2_title\")}</h1>\n      <Md source={intro} />\n\n      <ContinueButton\n        onClick={() => setCurrentStep(STEP_METRICS_EXPLANATION)}\n      />\n    </section>\n  );\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  ...ownProps,\n  ...state,\n  ...uiDuck.selector(state.ui),\n});\n\nconst mapDispatchToProps = (dispatch) =>\n  bindActionCreators(\n    {\n      ...uiDuck,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Step2);\n","export default \"Un mouvement actuel – qu’on appelle généralement éthique de l’IA - composé d’organisations\\ninternationales (OCDE, commission européenne), publiques, d’entreprises, universitaires,\\nassociations, ont produit un certain nombre de critiques concernant l’IA à travers des chartes\\néthiques, des indicateurs, des principes, etc. Par exemple, la charte éthique de la commission\\neuropéenne met en avant les principes suivants pour construire une IA digne de confiance :\\n\\n1. Capacité d’agir humaine (human agency)\\n1. Robustesse technique et sécurité\\n1. Protection des données personnelles et gouvernance des données\\n1. Transparence\\n1. Diversité, non-discrimination et équité\\n1. Bien-être sociétal et environnemental\\n1. Responsabilité\\n\";","/* eslint import/no-webpack-loader-syntax: off */\nimport react from \"react\";\n\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport Md from \"react-markdown\";\n\nimport translate from \"../helpers/translate\";\n\nimport * as uiDuck from \"../state/duckUi\";\nimport ContinueButton from \"./ContinueButton\";\n\nimport intro from \"!!raw-loader!../contents/metrics_explanation.md\";\nimport { STEP_METRICS_SORTING } from \"../constants\";\n\nfunction Step3({ ui: { currentStep }, setCurrentStep }) {\n  return (\n    <section className=\"step-2\">\n      <h1>{translate(\"step_3_title\")}</h1>\n      <Md source={intro} />\n\n      <ContinueButton onClick={() => setCurrentStep(STEP_METRICS_SORTING)} />\n    </section>\n  );\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  ...ownProps,\n  ...state,\n  ...uiDuck.selector(state.ui),\n});\n\nconst mapDispatchToProps = (dispatch) =>\n  bindActionCreators(\n    {\n      ...uiDuck,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Step3);\n","export default \"Pour toutes les combinaisons possibles de modèles sur l’ensemble des 20 features, nous avons construit un classifieur à l’aide d’un modèle logistique. Cela fait en tout 2 097 130 classifieurs. Pour chacun de ces classifieurs, nous calculons les indicateurs suivants :\\n\\n- **Performance** : L'AUC mesure la performance de l'algorithme. Comme traditionnellement dans l’industrie du Machine Learning, on supposera que le data scientist banquier est d’abord incité sur le critère de la performance de son algorithme car l’AUC est proportionnel au gain financier procuré par l’algorithme\\n- **Disparate impact sur le genre** : il s’agit d’un ratio entre le pourcentage d’acceptation chez les femmes et le pourcentage d’acceptation chez les hommes. Lorsque ce ratio est égal à 1, on considérera qu’il n’y pas d’effet disparate entre les hommes et les femmes. Attention, un effet disparate très différent de 1 ne signifie pas qu’il y a différence de traitement. Un effet disparate dit simplement que l’on constate deux effets différents entre les hommes et les femmes sans s’intéresser aux causes de cet effet (le traitement). La différence de traitement peut se tester avec des analyses toute chose égale par ailleurs (testing de CV par exemple). Dans la littérature, il y a deux manières de prendre une décision sur l’indicateur du disparate impact :\\n  - La règle des 80% : la règle des 80% est utilisée par le droit américain pour détecter des effets discriminants. Si le ratio du disparate impact est en-dessous de 80% alors on dira qu'il y a effet disparate entre hommes et femme.\\n  - Ne pas amplifier les biais à l’intérieur des données d’apprentissage : le Machine Learning peut amplifier le disparate impact déjà présent dans les données. Pour information, l'effet disparate dans nos données d’apprentissage (historique de données issues de décisions humaines passées) est de 0,90. Si cet effet est plus grand dans l'algorithme, alors l'algorithme aura amplifié les biais dans les données.\\n- **Distribution des erreurs entre hommes et femmes** : Une autre manière complémentaire de s’intéresser aux discriminations algorithmiques est de de s’intéresser à la distribution des erreurs entre hommes et femmes. L’erreur dans l’allocation du droit au crédit peut pénaliser les individus dans leur capacité d’agir (acheter une maison, voiture, etc). Il est donc primordial que celle-ci soit distribué de la même manière entre les hommes et les femmes. L’indicateur de la précision mesure le taux de prédictions corrects (c’est-à-dire vrais positifs + vrais négatifs). Une manière de mesurer la différence entre ces taux est de faire la soustraction entre la précision chez les hommes et la précision entre les femmes.\\n- **Privacy** : Selon les conventions des droits de l’hommes, chaque individu a le droit de disposer de ses données personnelles. Selon la RGPD, il faut donc veiller à ce que ces données privées soient récoltées de manière parcimonieuse (principe de minimisation), pour des finalités bien déterminées (principe de finalité), limiter les failles de sécurité, les fuites possibles, etc, Nous prendrons l’opposé du nombre de variables personnelles comme proxy de la privacy. Les 11 variables personnelles sont present_emp_since, sex, personal.\\\\_status, present_res_since ,property, age, housing, job, people_under_maintenance, telephone, foreign_worker. Le nombre de variables privées est également un proxy de la vulnérabilité aux failles de sécurité par attaques (sécurité).\\n- **Interprétabilité** : Selon la législation (RGPD), les demandeurs ont le droit d'exiger une explication des décisions. On considèrera que l’opposé du nombre total de variables dans le modèle comme un proxy de l’interprétabilité des algorithmes. En effet, des explications avec 20 variables seront beaucoup plus difficiles à fournir qu’une explication avec 5 variables.\\n\";","import react from \"react\";\n\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\n\nimport translate from \"../helpers/translate\";\n\nimport * as uiDuck from \"../state/duckUi\";\nimport * as dataDuck from \"../state/duckData\";\nimport ContinueButton from \"./ContinueButton\";\n\nimport { reorder, getItemStyle, getListStyle } from \"../helpers/sorting\";\nimport { STEP_MAIN_CHOICE, STEP_METRICS_SORTING } from \"../constants\";\n\n// import metrics from \"../contents/metrics_list.fr.yml\";\n\nfunction SortScreen({\n  ui: { currentStep, numberOfSteps, metricsOrderIsValidated },\n  data: { metricsOrder },\n  setCurrentStep,\n  setMetricsOrder,\n  setNumberOfSteps,\n  setMetricsOrderIsValidated,\n}) {\n  const onDragEnd = (result) => {\n    // dropped outside the list\n    if (!result.destination) {\n      return;\n    }\n\n    const items = reorder(\n      metricsOrder,\n      result.source.index,\n      result.destination.index\n    );\n\n    setMetricsOrder(items);\n    setNumberOfSteps(STEP_METRICS_SORTING + 1);\n  };\n\n  const handleValidateOrder = () => {\n    setMetricsOrderIsValidated(true);\n    setNumberOfSteps(STEP_MAIN_CHOICE + 1);\n    setCurrentStep(STEP_MAIN_CHOICE);\n  };\n  return (\n    <section className=\"sort-screen\">\n      <h1>{translate(\"sort_screen_title\")}</h1>\n      <p>{translate(\"sort_screen_prompt\")}</p>\n      <DragDropContext onDragEnd={onDragEnd}>\n        <Droppable droppableId=\"droppable\">\n          {(provided, snapshot) => (\n            <div\n              {...provided.droppableProps}\n              ref={provided.innerRef}\n              style={getListStyle(snapshot.isDraggingOver)}\n            >\n              {metricsOrder.map((item, index) => (\n                <Draggable\n                  key={item.name}\n                  draggableId={item.name}\n                  index={index}\n                >\n                  {(provided, snapshot) => (\n                    <div\n                      ref={provided.innerRef}\n                      {...provided.draggableProps}\n                      {...provided.dragHandleProps}\n                      style={getItemStyle(\n                        snapshot.isDragging,\n                        provided.draggableProps.style\n                      )}\n                    >\n                      <h3>{item.name} </h3>\n                      {/* <p>{item.short_description}</p> */}\n                    </div>\n                  )}\n                </Draggable>\n              ))}\n              {provided.placeholder}\n            </div>\n          )}\n        </Droppable>\n      </DragDropContext>\n      <button disabled={metricsOrderIsValidated} onClick={handleValidateOrder}>\n        Valider\n      </button>\n      {/* <ContinueButton\n        disabled={!metricsOrderIsValidated || numberOfSteps <= STEP_MAIN_CHOICE}\n        onClick={() => setCurrentStep(STEP_MAIN_CHOICE)}\n      /> */}\n    </section>\n  );\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  ...ownProps,\n  ...state,\n  ...uiDuck.selector(state.ui),\n  ...dataDuck.selector(state.data),\n});\n\nconst mapDispatchToProps = (dispatch) =>\n  bindActionCreators(\n    {\n      ...uiDuck,\n      ...dataDuck,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SortScreen);\n","// a little function to help us with reordering the result\nexport const reorder = (list, startIndex, endIndex) => {\n  const result = Array.from(list);\n  const [removed] = result.splice(startIndex, 1);\n  result.splice(endIndex, 0, removed);\n\n  return result;\n};\n\nconst grid = 8;\n\nexport const getItemStyle = (isDragging, draggableStyle) => ({\n  // some basic styles to make the items look a bit nicer\n  userSelect: \"none\",\n  padding: grid * 2,\n  margin: `0 0 ${grid}px 0`,\n\n  // change background colour if dragging\n  background: isDragging ? \"lightgreen\" : \"grey\",\n\n  // styles we need to apply on draggables\n  ...draggableStyle,\n});\n\nexport const getListStyle = (isDraggingOver) => ({\n  background: isDraggingOver ? \"lightblue\" : \"lightgrey\",\n  padding: grid,\n  width: 250,\n});\n","import react from \"react\";\nimport cx from \"classnames\";\n\nimport \"./MetricsCrossingIndicator.scss\";\n\nfunction MetricsCrossingIndicator({ metrics }) {\n  return (\n    <div className=\"metrics-crossing-indicator\">\n      <ul className=\"crossing-indicator-items\">\n        {metrics.map((metric) => (\n          <li\n            className={cx(\"crossing-indicator-item\", { active: metric.active })}\n            key={metric.name}\n          >\n            {metric.name}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport default MetricsCrossingIndicator;\n","import react, { useEffect, useRef, useState } from \"react\";\nimport { extent, min } from \"d3-array\";\nimport { scaleLinear } from \"d3-scale\";\nimport cx from \"classnames\";\nimport { Axis, axisPropsFromTickScale, LEFT, BOTTOM } from \"react-d3-axis\";\n\nimport metrics from \"../contents/metrics_list.fr.yml\";\n\nimport { DECIMALS } from \"../constants\";\n\nimport \"./BrushableScatterPlot.scss\";\n\nfunction BrushableScatterPlot({\n  data,\n  xVariable,\n  yVariable,\n  filteredVariables,\n  width = 500,\n  height = 500,\n  axisMargin = 30,\n  padding = 10,\n  brush: {\n    x: [xMinOriginal, xMaxOriginal],\n    y: [yMinOriginal, yMaxOriginal],\n  },\n  onBrushChange,\n  readOnly = false,\n  minified = false,\n  highlightedNodeId,\n}) {\n  const [[xMin, xMax], setXRange] = useState([xMinOriginal, xMaxOriginal]);\n  const [[yMin, yMax], setYRange] = useState([yMinOriginal, yMaxOriginal]);\n  const numberOfTicks = minified ? 3 : 10;\n  useEffect(() => {\n    setXRange([xMinOriginal, xMaxOriginal]);\n    setYRange([yMinOriginal, yMaxOriginal]);\n  }, [xMinOriginal, xMaxOriginal, yMinOriginal, yMaxOriginal]);\n  const xAccessor = (d) =>\n    xVariable === \"Privacy\"\n      ? -d.variables.filter((vName) => filteredVariables.includes(vName)).length\n      : +d[xVariable];\n  const yAccessor = (d) =>\n    yVariable === \"Privacy\"\n      ? -d.variables.filter((vName) => filteredVariables.includes(vName)).length\n      : +d[yVariable];\n  let xExtent = extent(data, xAccessor);\n  let yExtent = extent(data, yAccessor);\n  const xScale = scaleLinear()\n    .domain(xExtent)\n    .range([axisMargin + padding, width - padding]);\n\n  const yScale = scaleLinear()\n    .domain(yExtent.reverse())\n    .range([padding, height - axisMargin - padding]);\n\n  const [hoveredElement, setHoveredElement] = useState(undefined);\n  const [tooltipPosition, setTooltipPosition] = useState([0, 0]);\n  const [isBrushing, setIsBrushing] = useState(false);\n\n  const svgRef = useRef(null);\n\n  const handleMouseDown = (e) => {\n    if (readOnly) return;\n    setIsBrushing(true);\n    setHoveredElement(undefined);\n    const svgDims = svgRef.current.getBoundingClientRect();\n    const thatX = xScale.invert(e.clientX - svgDims.x);\n    const thatY = yScale.invert(e.clientY - svgDims.y);\n    setXRange([thatX, thatX]);\n    setYRange([thatY, thatY]);\n  };\n\n  const handleMouseMove = (e) => {\n    if (readOnly) return;\n    if (isBrushing) {\n      const svgDims = svgRef.current.getBoundingClientRect();\n      const thatX = xScale.invert(e.clientX - svgDims.x);\n      const thatY = yScale.invert(e.clientY - svgDims.y);\n      setXRange([xMin, thatX]);\n      setYRange([yMin, thatY]);\n    }\n  };\n\n  const handleMouseUp = () => {\n    if (readOnly) return;\n    setIsBrushing(false);\n    if (xMin !== xMax && yMin !== yMax) {\n      onBrushChange({\n        x: [+xMin.toFixed(DECIMALS), +xMax.toFixed(DECIMALS)].sort(),\n        y: [+yMin.toFixed(DECIMALS), +yMax.toFixed(DECIMALS)].sort(),\n      });\n    } else {\n      setXRange([xMinOriginal, xMaxOriginal]);\n      setYRange([yMinOriginal, yMaxOriginal]);\n    }\n  };\n\n  return (\n    <div className=\"brushable-scatterplot-container\">\n      <svg\n        width={width}\n        height={height}\n        ref={svgRef}\n        className={cx(\"brushable-scatterplot\", {\n          \"is-brushing\": isBrushing,\n          \"is-readonly\": readOnly,\n          \"is-minified\": minified,\n        })}\n        onMouseDown={handleMouseDown}\n        onMouseMove={handleMouseMove}\n        onMouseUp={handleMouseUp}\n        onMouseLeave={handleMouseUp}\n      >\n        <g\n          transform={`translate(0, ${height - axisMargin - padding})`}\n          className=\"x-axis\"\n        >\n          <Axis\n            {...axisPropsFromTickScale(xScale, numberOfTicks)}\n            style={{ orient: BOTTOM }}\n          />\n        </g>\n        <g\n          transform={`translate(${axisMargin + padding}, 0)`}\n          className=\"y-axis\"\n        >\n          <Axis\n            {...axisPropsFromTickScale(yScale, numberOfTicks)}\n            style={{ orient: LEFT }}\n          />\n        </g>\n        <rect\n          x={xScale(min([xMin, xMax]))}\n          y={yScale(min([yMin, yMax])) - Math.abs(yScale(yMax) - yScale(yMin))}\n          width={Math.abs(xScale(xMax) - xScale(xMin))}\n          height={Math.abs(yScale(yMax) - yScale(yMin))}\n          fill=\"rgba(0,0,0,0.5)\"\n        />\n        <g className=\"chart\">\n          {data.map((datum, index) => {\n            const handleOvered = () => {\n              if (\n                !readOnly &&\n                !minified &&\n                !isBrushing &&\n                (!hoveredElement || hoveredElement.id !== datum.id)\n              ) {\n                setHoveredElement(datum);\n                setTooltipPosition([\n                  10 + xScale(xAccessor(datum)),\n                  yScale(yAccessor(datum)),\n                ]);\n              }\n            };\n            const handleLeave = () => {\n              if (\n                !readOnly &&\n                !minified &&\n                !isBrushing &&\n                hoveredElement &&\n                hoveredElement.id === datum.id\n              ) {\n                setHoveredElement(undefined);\n              }\n            };\n            const x = xAccessor(datum);\n            const y = yAccessor(datum);\n            const xExtent = [xMin, xMax].sort((a, b) => {\n              if (a > b) {\n                return 1;\n              } else return -1;\n            });\n            const yExtent = [yMin, yMax].sort((a, b) => {\n              if (a > b) {\n                return 1;\n              } else return -1;\n            });\n            const active =\n              x >= xExtent[0] &&\n              x <= xExtent[1] &&\n              y >= yExtent[0] &&\n              y <= yExtent[1];\n            return (\n              <circle\n                cx={xScale(x)}\n                cy={yScale(y)}\n                className={cx(\"dot\", {\n                  \"is-active\": active,\n                  \"is-highlighted\":\n                    highlightedNodeId && highlightedNodeId === datum.id,\n                })}\n                onMouseEnter={handleOvered}\n                onMouseMove={handleOvered}\n                onMouseLeave={handleLeave}\n                key={datum.id}\n                r={width / 200}\n              />\n            );\n          })}\n        </g>\n      </svg>\n      {\n        <div\n          className={cx(\"chart-tooltip\", { \"is-active\": hoveredElement })}\n          style={{\n            left: tooltipPosition[0],\n            top: tooltipPosition[1],\n          }}\n        >\n          {hoveredElement && !readOnly && !minified && (\n            <ul>\n              {metrics.map(({ id, name }) => {\n                return (\n                  <li\n                    key={id}\n                    className={cx(\"tooltip-info\", {\n                      active: id === xVariable || id === yVariable,\n                    })}\n                  >\n                    {name} :{\" \"}\n                    {id === \"Privacy\"\n                      ? -hoveredElement.variables.filter((vName) =>\n                          filteredVariables.includes(vName)\n                        ).length\n                      : hoveredElement[id]}\n                  </li>\n                );\n              })}\n              <li>Variables : {hoveredElement.variables.join(\", \")}</li>\n            </ul>\n          )}\n        </div>\n      }\n    </div>\n  );\n}\n\nexport default BrushableScatterPlot;\n","import react, { useEffect, useState } from \"react\";\n\nimport Slider from \"rc-slider\";\nimport \"rc-slider/assets/index.css\";\n\nimport variables from \"../contents/variables_list.fr.yml\";\n\nconst Range = Slider.createSliderWithTooltip(Slider.Range);\n\nfunction Input({ onChange, validate, value, ...props }) {\n  const [localValue, setLocalValue] = useState(value);\n  const handleChange = (e) => {\n    setLocalValue(e.target.value);\n  };\n  const handleBlur = () => {\n    if (validate(localValue)) {\n      onChange(localValue);\n    } else {\n      setLocalValue(value);\n    }\n  };\n\n  useEffect(() => {\n    setLocalValue(value);\n  }, [value]);\n  return (\n    <input\n      {...props}\n      onChange={handleChange}\n      onBlur={handleBlur}\n      value={localValue}\n    />\n  );\n}\n\nfunction VariableInputs({\n  metric,\n  values,\n  min,\n  max,\n  onRangeChange,\n  filteredVariables,\n  onFilteredVariablesChange,\n}) {\n  const handleMinChange = (val) => {\n    onRangeChange([val, values[1]]);\n  };\n  const handleMaxChange = (val) => {\n    onRangeChange([values[0], val]);\n  };\n  const selected = filteredVariables.reduce(\n    (res, id) => ({ ...res, [id]: true }),\n    {}\n  );\n  const SLIDER_MULTIPLIER = 10000;\n  return (\n    <div className=\"variable-inputs\">\n      <h5>\n        Choix pour <code>{metric.name}</code>\n      </h5>\n      {metric.id === \"Privacy\" ? (\n        <div>\n          <p>Choisir les variables relevant de la privacy</p>\n          <ul>\n            {variables.map(({ id, name }) => (\n              <li\n                onClick={() => {\n                  let newVariables;\n                  if (selected[id]) {\n                    newVariables = filteredVariables.filter(\n                      (thatId) => id !== thatId\n                    );\n                  } else {\n                    newVariables = [...filteredVariables, id];\n                  }\n                  onFilteredVariablesChange(newVariables);\n                }}\n                key={id}\n              >\n                <input\n                  checked={selected[id] !== undefined}\n                  value={id}\n                  readOnly\n                  type=\"radio\"\n                />\n                <label>{name}</label>\n              </li>\n            ))}\n          </ul>\n        </div>\n      ) : null}\n      <p>\n        Modèles entre{\" \"}\n        <Input\n          validate={(val) => !isNaN(val) && val < values[1]}\n          onChange={handleMinChange}\n          value={\"\" + values[0]}\n        />{\" \"}\n        et{\" \"}\n        <Input\n          validate={(val) => !isNaN(val) && val > values[0]}\n          value={\"\" + values[1]}\n          onChange={handleMaxChange}\n        />{\" \"}\n        (min: {min}, max: {max})\n      </p>\n\n      <Range\n        allowCross={false}\n        tipFormatter={(val) => val / SLIDER_MULTIPLIER}\n        onChange={([thatMin, thatMax]) => {\n          onRangeChange([\n            thatMin / SLIDER_MULTIPLIER,\n            thatMax / SLIDER_MULTIPLIER,\n          ]);\n        }}\n        step={metric.type === \"integer\" ? SLIDER_MULTIPLIER : undefined}\n        min={min * SLIDER_MULTIPLIER}\n        max={max * SLIDER_MULTIPLIER}\n        defaultValue={[min * SLIDER_MULTIPLIER, max * SLIDER_MULTIPLIER]}\n        value={[values[0] * SLIDER_MULTIPLIER, values[1] * SLIDER_MULTIPLIER]}\n        style={{ width: \"50vw\" }}\n      />\n    </div>\n  );\n}\n\nexport default VariableInputs;\n","export const filterModels = (models, filters) => {\n  return filters.reduce((res, filter) => {\n    return res.filter((model) => {\n      const { variable, type, range } = filter;\n      let value = model[variable];\n      /* @todo dirty - just to handle privacy */\n      if (filter.variables) {\n        value = -model.variables.filter((vName) =>\n          filter.variables.includes(vName)\n        ).length;\n      }\n      switch (type) {\n        case \"range\":\n        default:\n          const [min, max] = range.sort((a, b) => {\n            if (a > b) {\n              return 1;\n            } else return -1;\n          });\n          return value >= min && value <= max;\n      }\n    });\n  }, models);\n};\n","import react, { useEffect, useState } from \"react\";\nimport { min, max } from \"d3-array\";\nimport \"./FilterForm.scss\";\n\nimport BrushableScatterPlot from \"./BrushableScatterPlot\";\nimport VariableInputs from \"./VariableInputs\";\n\nimport { useDebounce } from \"../helpers/hooks\";\nimport { filterModels } from \"../helpers/filters\";\nimport variables from \"../contents/variables_list.fr.yml\";\nimport { DECIMALS } from \"../constants\";\n\nfunction FilterForm({ metrics, models, onSubmit, filters = [], values }) {\n  let [metric1, metric2] = metrics;\n\n  const defaultFilteredVariables = variables\n    .filter(({ relates_to_privacy }) => relates_to_privacy)\n    .map(({ id }) => id);\n\n  const [absoluteMin1, setAbsoluteMin1] = useState(0);\n  const [absoluteMax2, setAbsoluteMax2] = useState(0);\n  const [filteredVariables, setFilteredVariables] = useState(\n    defaultFilteredVariables\n  );\n\n  const [absoluteMin2, setAbsoluteMin2] = useState(0);\n  const [absoluteMax1, setAbsoluteMax1] = useState(0);\n  const [choosenMin1, setChoosenMin1] = useState(null);\n  const [choosenMax2, setChoosenMax2] = useState(null);\n\n  const [choosenMin2, setChoosenMin2] = useState(null);\n  const [choosenMax1, setChoosenMax1] = useState(null);\n\n  const [filteredModels, setFilteredModels] = useState(models);\n\n  useEffect(() => {\n    if (values && values.length > 1) {\n      setChoosenMin1(values[0].range[0]);\n      setChoosenMax1(values[0].range[1]);\n      setChoosenMin2(values[1].range[0]);\n      setChoosenMax2(values[1].range[1]);\n      const hasVariables = values.find((v) => v.variables);\n      if (hasVariables) {\n        setFilteredVariables(hasVariables.variables);\n      }\n    } else {\n      setChoosenMin1(absoluteMin1);\n      setChoosenMax1(absoluteMax1);\n      setChoosenMin2(absoluteMin2);\n      setChoosenMax2(absoluteMax2);\n      setFilteredVariables(defaultFilteredVariables);\n    }\n  }, [values]);\n\n  useDebounce(\n    () => {\n      const theseFilters = [\n        ...filters,\n        {\n          variable: metric1.id,\n          type: \"range\",\n          range: [choosenMin1, choosenMax1],\n          variables: metric1.id === \"Privacy\" ? filteredVariables : undefined,\n        },\n        {\n          variable: metric2.id,\n          type: \"range\",\n          range: [choosenMin2, choosenMax2],\n          variables: metric2.id === \"Privacy\" ? filteredVariables : undefined,\n        },\n      ];\n      setFilteredModels(filterModels(models, theseFilters));\n    },\n    [choosenMin1, choosenMax1, choosenMin2, choosenMax2],\n    1000\n  );\n\n  useEffect(() => {\n    metric1 = metrics[0];\n    metric2 = metrics[1];\n    let absMin1, absMax1, absMin2, absMax2;\n    if (metric1.id === \"Privacy\") {\n      absMin1 = -max(\n        models,\n        (d) =>\n          d.variables.filter((vName) => -filteredVariables.includes(vName))\n            .length\n      );\n      absMax1 = -min(\n        models,\n        (d) =>\n          d.variables.filter((vName) => -filteredVariables.includes(vName))\n            .length\n      );\n    } else {\n      absMin1 = min(models, (d) => +d[metric1.id]);\n      absMax1 = max(models, (d) => +d[metric1.id]);\n    }\n    if (metric2.id === \"Privacy\") {\n      absMin2 = -max(\n        models,\n        (d) =>\n          d.variables.filter((vName) => -filteredVariables.includes(vName))\n            .length\n      );\n      absMax2 = -min(\n        models,\n        (d) =>\n          d.variables.filter((vName) => -filteredVariables.includes(vName))\n            .length\n      );\n    } else {\n      absMin2 = min(models, (d) => +d[metric2.id]);\n      absMax2 = max(models, (d) => +d[metric2.id]);\n    }\n\n    setAbsoluteMin1(absMin1.toFixed(DECIMALS));\n    setAbsoluteMax1(absMax1.toFixed(DECIMALS));\n    setAbsoluteMin2(absMin2.toFixed(DECIMALS));\n    setAbsoluteMax2(absMax2.toFixed(DECIMALS));\n\n    if (!values) {\n      setChoosenMin1(absMin1.toFixed(DECIMALS));\n      setChoosenMax1(absMax1.toFixed(DECIMALS));\n      setChoosenMin2(absMin2.toFixed(DECIMALS));\n      setChoosenMax2(absMax2.toFixed(DECIMALS));\n    }\n\n    setFilteredVariables(\n      variables\n        .filter(({ relates_to_privacy }) => relates_to_privacy)\n        .map(({ id }) => id)\n    );\n  }, [models, metrics]);\n\n  useEffect(() => {\n    if (metric1.id === \"Privacy\") {\n      const absMin1 = -max(\n        models,\n        (d) =>\n          d.variables.filter((vName) => -filteredVariables.includes(vName))\n            .length\n      );\n      const absMax1 = -min(\n        models,\n        (d) =>\n          d.variables.filter((vName) => -filteredVariables.includes(vName))\n            .length\n      );\n      setAbsoluteMin1(absMin1);\n      setAbsoluteMax1(absMax1);\n    }\n    if (metric2.id === \"Privacy\") {\n      const absMin2 = -max(\n        models,\n        (d) =>\n          d.variables.filter((vName) => filteredVariables.includes(vName))\n            .length\n      );\n      const absMax2 = -min(\n        models,\n        (d) =>\n          d.variables.filter((vName) => filteredVariables.includes(vName))\n            .length\n      );\n      setAbsoluteMin2(absMin2);\n      setAbsoluteMax2(absMax2);\n    }\n  }, [filteredVariables]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n  };\n\n  const handleValidate = (e) => {\n    e.preventDefault();\n    onSubmit([\n      {\n        variable: metric1.id,\n        type: \"range\",\n        range: [choosenMin1, choosenMax1],\n        variables: metric1.id === \"Privacy\" ? filteredVariables : undefined,\n      },\n      {\n        variable: metric2.id,\n        type: \"range\",\n        range: [choosenMin2, choosenMax2],\n        variables: metric2.id === \"Privacy\" ? filteredVariables : undefined,\n      },\n    ]);\n  };\n  const handleBrushChange = ({\n    x: [thatXMin, thatXMax],\n    y: [thatYMin, thatYMax],\n  }) => {\n    setChoosenMin1(thatXMin);\n    setChoosenMax1(thatXMax);\n    setChoosenMin2(thatYMin);\n    setChoosenMax2(thatYMax);\n  };\n  return (\n    <form className=\"filter-form\" onSubmit={handleSubmit}>\n      <BrushableScatterPlot\n        data={models}\n        xVariable={metric1.id}\n        yVariable={metric2.id}\n        filteredVariables={filteredVariables}\n        brush={{\n          x: [choosenMin1, choosenMax1],\n          y: [choosenMin2, choosenMax2],\n        }}\n        onBrushChange={handleBrushChange}\n      />\n      <h4>\n        Vous filtrer dans <code>{metric1.name}</code> sur les x et{\" \"}\n        <code>{metric2.name}</code> sur les y\n      </h4>\n      <p>{filteredModels.length} modèles sélectionnés</p>\n\n      <VariableInputs\n        metric={metric1}\n        values={[choosenMin1, choosenMax1]}\n        min={absoluteMin1}\n        max={absoluteMax1}\n        filteredVariables={filteredVariables}\n        onRangeChange={([thatMin, thatMax]) => {\n          setChoosenMin1(thatMin);\n          setChoosenMax1(thatMax);\n        }}\n        onFilteredVariablesChange={(theseVars) => {\n          setFilteredVariables(theseVars);\n        }}\n      />\n      <VariableInputs\n        metric={metric2}\n        values={[choosenMin2, choosenMax2]}\n        min={absoluteMin2}\n        max={absoluteMax2}\n        filteredVariables={filteredVariables}\n        onRangeChange={([thatMin, thatMax]) => {\n          setChoosenMin2(thatMin);\n          setChoosenMax2(thatMax);\n        }}\n        onFilteredVariablesChange={(theseVars) => {\n          setFilteredVariables(theseVars);\n        }}\n      />\n\n      <button onClick={handleValidate} type=\"submit\">\n        Valider\n      </button>\n    </form>\n  );\n}\n\nexport default FilterForm;\n","import react, { useState, useEffect } from \"react\";\n\nexport function useDebounce(fn, values, delay) {\n  // const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(() => {\n    // Update debounced value after delay\n    const handler = setTimeout(() => {\n      fn();\n      // setDebouncedValue(value);\n    }, delay);\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [delay, ...values]);\n  // return debouncedValue;\n}\n","import react from \"react\";\n\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\n\nimport translate from \"../helpers/translate\";\n\nimport * as uiDuck from \"../state/duckUi\";\nimport * as dataDuck from \"../state/duckData\";\nimport ContinueButton from \"./ContinueButton\";\nimport MetricsCrossingIndicator from \"./MetricsCrossingIndicator\";\n\nimport FilterForm from \"./FilterForm\";\nimport { STEP_SECONDARY_CHOICE_1 } from \"../constants\";\n\nfunction MainChoiceScreen({\n  ui: { currentStep, numberOfSteps, mainChoiceIsValidated },\n  data: { metricsOrder, models, filters },\n  setCurrentStep,\n  setNumberOfSteps,\n  setMainChoiceIsValidated,\n  addFilters,\n}) {\n  const handleSubmit = (theseFilters) => {\n    const [filter1, filter2] = theseFilters;\n    addFilters({\n      0: filter1,\n      1: filter2,\n    });\n    setMainChoiceIsValidated(true);\n    setNumberOfSteps(STEP_SECONDARY_CHOICE_1 + 1);\n    setCurrentStep(STEP_SECONDARY_CHOICE_1);\n  };\n  return (\n    <section className=\"main-choice-screen\">\n      <h1>{translate(\"main_choice_screen_title\")}</h1>\n      <p>{translate(\"main_choice_screen_intro\")}</p>\n      <MetricsCrossingIndicator\n        metrics={metricsOrder.map((m, i) => ({\n          ...m,\n          active: i <= 1,\n        }))}\n      />\n      <FilterForm\n        metrics={metricsOrder.slice(0, 2)}\n        models={models}\n        onSubmit={handleSubmit}\n        values={\n          filters[\"0\"] && filters[\"1\"]\n            ? [filters[\"0\"], filters[\"1\"]]\n            : undefined\n        }\n      />\n      {/* <ContinueButton\n        disabled={!mainChoiceIsValidated || numberOfSteps <= 6}\n        onClick={() => setCurrentStep(currentStep + 1)}\n      /> */}\n    </section>\n  );\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  ...ownProps,\n  ...state,\n  ...uiDuck.selector(state.ui),\n  ...dataDuck.selector(state.data),\n});\n\nconst mapDispatchToProps = (dispatch) =>\n  bindActionCreators(\n    {\n      ...uiDuck,\n      ...dataDuck,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MainChoiceScreen);\n","import react from \"react\";\n\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\n\nimport translate from \"../helpers/translate\";\nimport { filterModels } from \"../helpers/filters\";\n\nimport * as uiDuck from \"../state/duckUi\";\nimport * as dataDuck from \"../state/duckData\";\nimport ContinueButton from \"./ContinueButton\";\nimport MetricsCrossingIndicator from \"./MetricsCrossingIndicator\";\n\nimport FilterForm from \"./FilterForm\";\nimport BrushableScatterPlot from \"./BrushableScatterPlot\";\n\nimport { STEP_SECONDARY_CHOICE_2 } from \"../constants\";\n\nfunction SecondChoiceScreen({\n  ui: { currentStep, numberOfSteps, mainChoiceIsValidated },\n  data: { metricsOrder, models, filters },\n  setCurrentStep,\n  setNumberOfSteps,\n  setMainChoiceIsValidated,\n  addFilters,\n  metricsExtent: [fromMetric, toMetric] = [2, 3],\n  previousExtents = [],\n  nextStep = STEP_SECONDARY_CHOICE_2,\n}) {\n  const handleSubmit = (theseFilters) => {\n    const [filter1, filter2] = theseFilters;\n    addFilters({\n      [fromMetric + \"\"]: filter1,\n      [toMetric + \"\"]: filter2,\n    });\n    setMainChoiceIsValidated(true);\n    setNumberOfSteps(nextStep + 1);\n    setCurrentStep(nextStep);\n  };\n\n  return (\n    <section className=\"second-choice-screen\">\n      <h1>{translate(\"second_choice_screen_title\")}</h1>\n      <p>{translate(\"second_choice_screen_intro\")}</p>\n      {/* mini scatterplots for previous steps */}\n      {previousExtents.map(([from, to], index) => {\n        let theseVariables = [filters[from + \"\"], filters[to + \"\"]].find(\n          (f) => f.variables\n        );\n        theseVariables = theseVariables ? theseVariables.variables : undefined;\n        return (\n          <BrushableScatterPlot\n            key={index}\n            data={\n              from === 0\n                ? models\n                : filterModels(\n                    models,\n                    Object.entries(filters)\n                      .filter(([key]) => +key < from)\n                      .map(([_key, filter]) => filter)\n                  )\n            }\n            xVariable={filters[from + \"\"].variable}\n            yVariable={filters[to + \"\"].variable}\n            filteredVariables={theseVariables}\n            brush={{\n              x: filters[from + \"\"].range,\n              y: filters[to + \"\"].range,\n            }}\n            minified\n            width={200}\n            height={200}\n            onBrushChange={({\n              x: [thatXMin, thatXMax],\n              y: [thatYMin, thatYMax],\n            }) => {\n              addFilters({\n                [from + \"\"]: {\n                  ...filters[from + \"\"],\n                  range: [thatXMin, thatXMax],\n                },\n                [to + \"\"]: { ...filters[to + \"\"], range: [thatYMin, thatYMax] },\n              });\n            }}\n          />\n        );\n      })}\n\n      <MetricsCrossingIndicator\n        metrics={metricsOrder.map((m, i) => ({\n          ...m,\n          active: i >= fromMetric && i <= toMetric,\n        }))}\n      />\n      <FilterForm\n        metrics={metricsOrder.slice(fromMetric, toMetric + 1)}\n        models={filterModels(\n          models,\n          Object.entries(filters)\n            .filter(([key]) => +key < fromMetric)\n            .map(([_key, filter]) => filter)\n        )}\n        onSubmit={handleSubmit}\n        values={\n          filters[fromMetric + \"\"] && filters[toMetric + \"\"]\n            ? [filters[fromMetric + \"\"], filters[toMetric + \"\"]]\n            : undefined\n        }\n      />\n      {/* <ContinueButton\n        disabled={!mainChoiceIsValidated || numberOfSteps <= nextStep}\n        onClick={() => setCurrentStep(nextStep)}\n      /> */}\n    </section>\n  );\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  ...ownProps,\n  ...state,\n  ...uiDuck.selector(state.ui),\n  ...dataDuck.selector(state.data),\n});\n\nconst mapDispatchToProps = (dispatch) =>\n  bindActionCreators(\n    {\n      ...uiDuck,\n      ...dataDuck,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SecondChoiceScreen);\n","import react, { useEffect, useState } from \"react\";\n\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport cx from \"classnames\";\n\nimport translate from \"../helpers/translate\";\n\nimport * as uiDuck from \"../state/duckUi\";\nimport * as dataDuck from \"../state/duckData\";\nimport ContinueButton from \"./ContinueButton\";\n\nimport metricsList from \"../contents/metrics_list.fr.yml\";\n\nimport { STEP_CONCLUSION } from \"../constants\";\n\nfunction DataikuInputs({\n  ui: { numberOfSteps, mainChoiceIsValidated },\n  data: { dataikuResults },\n  setCurrentStep,\n  setNumberOfSteps,\n  setDataikuResults,\n  nextStep = STEP_CONCLUSION,\n}) {\n  const [data, setData] = useState({});\n\n  useEffect(() => {\n    if (dataikuResults) {\n      setData(dataikuResults);\n    }\n  }, [dataikuResults]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setDataikuResults(data);\n    setNumberOfSteps(nextStep + 1);\n    setCurrentStep(nextStep);\n  };\n  return (\n    <section className=\"single-choice-screen\">\n      <h1>{translate(\"dataiku_input_screen_title\")}</h1>\n      <p>{translate(\"dataiku_input_screen_intro\")}</p>\n      <form onSubmit={handleSubmit}>\n        <ul>\n          {metricsList.map(({ id, name }) => {\n            const handleChange = (e) => {\n              console.log(id, e.target.value);\n              setData({\n                ...data,\n                [id]: e.target.value,\n              });\n            };\n            return (\n              <li key={id}>\n                <label>{name}</label>\n                <input\n                  placeholder={`entrez vous résultats pour la métrique ${name}`}\n                  value={data[id] || \"\"}\n                  onChange={handleChange}\n                />\n              </li>\n            );\n          })}\n        </ul>\n        <button type=\"submit\" onClick={handleSubmit}>\n          Valider et passer aux conclusions\n        </button>\n      </form>\n      <ContinueButton\n        disabled={!mainChoiceIsValidated || numberOfSteps <= nextStep}\n        onClick={() => setCurrentStep(nextStep)}\n      />\n    </section>\n  );\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  ...ownProps,\n  ...state,\n  ...uiDuck.selector(state.ui),\n  ...dataDuck.selector(state.data),\n});\n\nconst mapDispatchToProps = (dispatch) =>\n  bindActionCreators(\n    {\n      ...uiDuck,\n      ...dataDuck,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DataikuInputs);\n","import react, { createContext, useState } from \"react\";\n\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport cx from \"classnames\";\n\nimport translate from \"../helpers/translate\";\nimport { filterModels } from \"../helpers/filters\";\n\nimport * as uiDuck from \"../state/duckUi\";\nimport * as dataDuck from \"../state/duckData\";\nimport ContinueButton from \"./ContinueButton\";\nimport BrushableScatterPlot from \"./BrushableScatterPlot\";\n\nimport \"./SingleChoiceScreen.scss\";\n\nimport metricsList from \"../contents/metrics_list.fr.yml\";\n\nimport { STEP_DATAIKU_FEEDBACK } from \"../constants\";\n\nfunction SingleChoiceScreen({\n  ui: { numberOfSteps, mainChoiceIsValidated },\n  data: { models, filters, choosenModel },\n  setChoosenModel,\n  setCurrentStep,\n  setNumberOfSteps,\n  addFilters,\n  nextStep = STEP_DATAIKU_FEEDBACK,\n}) {\n  const [highlightedNodeId, setHighlightedNodeId] = useState(undefined);\n  const previousExtents = [\n    [0, 1],\n    [2, 3],\n    [3, 4],\n  ];\n\n  const visibleModels = filterModels(\n    models,\n    Object.entries(filters).map(([_key, filter]) => filter)\n  );\n\n  let privacyVariables = Object.entries(filters)\n    .map(([_key, filter]) => filter)\n    .find((f) => f.variables);\n  privacyVariables = privacyVariables && privacyVariables.variables;\n  return (\n    <section className=\"single-choice-screen\">\n      <h1>{translate(\"model_choice_screen_title\")}</h1>\n      <p>{translate(\"model_choice_screen_intro\")}</p>\n      {/* mini scatterplots for previous steps */}\n      {previousExtents.map(([from, to], index) => {\n        let theseVariables = [filters[from + \"\"], filters[to + \"\"]].find(\n          (f) => f.variables\n        );\n        theseVariables = theseVariables ? theseVariables.variables : undefined;\n        return (\n          <BrushableScatterPlot\n            key={index}\n            data={\n              from === 0\n                ? models\n                : filterModels(\n                    models,\n                    Object.entries(filters)\n                      .filter(([key]) => +key < from)\n                      .map(([_key, filter]) => filter)\n                  )\n            }\n            xVariable={filters[from + \"\"].variable}\n            yVariable={filters[to + \"\"].variable}\n            filteredVariables={theseVariables}\n            brush={{\n              x: filters[from + \"\"].range,\n              y: filters[to + \"\"].range,\n            }}\n            readOnly\n            minified\n            highlightedNodeId={\n              choosenModel\n                ? highlightedNodeId || choosenModel.id\n                : highlightedNodeId\n            }\n            width={200}\n            height={200}\n            onBrushChange={({\n              x: [thatXMin, thatXMax],\n              y: [thatYMin, thatYMax],\n            }) => {\n              addFilters({\n                [from + \"\"]: {\n                  ...filters[from + \"\"],\n                  range: [thatXMin, thatXMax],\n                },\n                [to + \"\"]: { ...filters[to + \"\"], range: [thatYMin, thatYMax] },\n              });\n            }}\n          />\n        );\n      })}\n      <table className=\"model-choice-table\">\n        <thead>\n          <tr>\n            {metricsList.map(({ name, id }) => (\n              <th key={id}>{name}</th>\n            ))}\n            <th>Variables</th>\n          </tr>\n        </thead>\n        <tbody\n          onMouseLeave={() => {\n            setHighlightedNodeId(undefined);\n          }}\n        >\n          {visibleModels.map((model) => {\n            return (\n              <tr\n                key={model.id}\n                onMouseOver={() => {\n                  setHighlightedNodeId(model.id);\n                }}\n                onClick={() => {\n                  setChoosenModel(model);\n                  setNumberOfSteps(STEP_DATAIKU_FEEDBACK + 1);\n                  setCurrentStep(STEP_DATAIKU_FEEDBACK);\n                }}\n                className={cx(\"model-row\", {\n                  \"is-active\": choosenModel\n                    ? model.id === highlightedNodeId ||\n                      model.id === choosenModel.id\n                    : model.id === highlightedNodeId,\n                })}\n              >\n                {metricsList.map(({ name, id }) => (\n                  <th key={id}>\n                    {id === \"Privacy\" && privacyVariables\n                      ? -model.variables.filter((vName) =>\n                          privacyVariables.includes(vName)\n                        ).length\n                      : model[id]}\n                  </th>\n                ))}\n                <th>{model.variables.join(\", \")}</th>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n\n      <ContinueButton\n        disabled={!mainChoiceIsValidated || numberOfSteps <= nextStep}\n        onClick={() => setCurrentStep(nextStep)}\n      />\n    </section>\n  );\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  ...ownProps,\n  ...state,\n  ...uiDuck.selector(state.ui),\n  ...dataDuck.selector(state.data),\n});\n\nconst mapDispatchToProps = (dispatch) =>\n  bindActionCreators(\n    {\n      ...uiDuck,\n      ...dataDuck,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SingleChoiceScreen);\n","// import { combineReducers } from 'redux';\nimport { createStructuredSelector } from \"reselect\";\n\n/**\n * ACTION NAMES\n */\nimport {\n  RESET_APP,\n  SET_METRICS_ORDER,\n  ADD_FILTERS,\n  SET_DATAIKU_RESULTS,\n  SET_CHOOSEN_MODEL,\n} from \"./duckData\";\nimport { SET_CURRENT_STEP, START_APP } from \"./duckUi\";\n\n/**\n * ACTION FUNCTIONS\n */\n/**\n * REDUCER\n */\nconst DEFAULT_STATE = {\n  history: [],\n};\n\nfunction data(state = DEFAULT_STATE, action) {\n  // const { payload } = action;\n  switch (action.type) {\n    case RESET_APP:\n      return DEFAULT_STATE;\n    case SET_METRICS_ORDER:\n    case ADD_FILTERS:\n    case SET_DATAIKU_RESULTS:\n    case SET_CHOOSEN_MODEL:\n    case SET_CURRENT_STEP:\n    case START_APP:\n      return {\n        ...state,\n        history: [\n          ...state.history,\n          {\n            action,\n            date: new Date(),\n          },\n        ],\n      };\n    default:\n      return state;\n  }\n}\n\n// export default combineReducers({data, ...})\nexport default data;\n\n/**\n * SELECTOR\n */\n\nconst history = (state) => state.history;\n\nexport const selector = createStructuredSelector({\n  history,\n});\n","import FileSaver from \"file-saver\";\n\n/**\n * @param {string} text - the text to put in the file\n * @param {string} extension - the extension to append to file name\n * @param {string} fileName - the name to attribute to the downloaded file\n */\nexport default function downloadFile(\n  text,\n  extension = \"txt\",\n  fileName = \"download\"\n) {\n  let type;\n  switch (extension) {\n    case \"zip\":\n      type = \"octet/stream\";\n      break;\n    case \"html\":\n      type = \"text/html;charset=utf-8\";\n      break;\n    default:\n      type = \"text/plain;charset=utf-8\";\n      break;\n  }\n  const blob = new Blob([text], { type });\n  console.log(text);\n  FileSaver.saveAs(blob, `${fileName}.${extension}`);\n}\n","import react from \"react\";\nimport translate from \"../helpers/translate\";\n\nimport {\n  SET_METRICS_ORDER,\n  ADD_FILTERS,\n  SET_DATAIKU_RESULTS,\n  SET_CHOOSEN_MODEL,\n} from \"../state/duckData\";\n\nimport { SET_CURRENT_STEP, START_APP } from \"../state/duckUi\";\nimport {\n  STEP_HEADER,\n  STEP_DATAIKU_PRACTICE,\n  STEP_EU_LEGISLATION,\n  STEP_METRICS_EXPLANATION,\n  STEP_METRICS_SORTING,\n  STEP_MAIN_CHOICE,\n  STEP_SECONDARY_CHOICE_1,\n  STEP_SECONDARY_CHOICE_2,\n  STEP_MODEL_CHOICE,\n  STEP_DATAIKU_FEEDBACK,\n  STEP_CONCLUSION,\n} from \"../constants\";\nimport downloadFile from \"../helpers/download\";\n\nconst serializeStep = (payload) => {\n  switch (payload) {\n    case STEP_HEADER:\n      return translate(\"app_header_view\");\n    case STEP_DATAIKU_PRACTICE:\n      return translate(\"dataiku_practice_view\");\n    case STEP_EU_LEGISLATION:\n      return translate(\"eu_legislation_view\");\n    case STEP_METRICS_EXPLANATION:\n      return translate(\"metrics_explanation_view\");\n    case STEP_METRICS_SORTING:\n      return translate(\"metrics_sorting_view\");\n    case STEP_MAIN_CHOICE:\n      return translate(\"main_filter_view\");\n    case STEP_SECONDARY_CHOICE_1:\n      return translate(\"secondary_filter_view\");\n    case STEP_SECONDARY_CHOICE_2:\n      return translate(\"tertiary_filter_view\");\n    case STEP_MODEL_CHOICE:\n      return translate(\"model_choice_view\");\n    case STEP_DATAIKU_FEEDBACK:\n      return translate(\"dataiku_feedback_view\");\n    case STEP_CONCLUSION:\n      return translate(\"conclusion_view\");\n    default:\n      return \"\";\n  }\n};\n\nconst actionsSerialization = {\n  START_APP: {\n    description: (payload) => translate(\"started_the_app\"),\n  },\n  SET_METRICS_ORDER: {\n    description: (payload) =>\n      translate(\"changed_metrics_order_to\") +\n      \" \" +\n      payload.map((i, index) => index + 1 + \"/ \" + i.name).join(\", \"),\n  },\n  ADD_FILTERS: {\n    description: (payload) =>\n      translate(\"add_filters\") +\n      \" \" +\n      Object.entries(payload)\n        .map(\n          ([_key, filter]) =>\n            `${filter.variable} (entre ${filter.range[0]} et ${filter.range[1]})`\n        )\n        .join(\" \" + translate(\"and\") + \" \"),\n  },\n  SET_DATAIKU_RESULTS: {\n    description: () => translate(\"set_dataiku_results\"),\n  },\n  SET_CHOOSEN_MODEL: {\n    description: (payload) =>\n      translate(\"set_choosen_model\") + \" : \" + payload.variables.join(\"/\"),\n  },\n  SET_CURRENT_STEP: {\n    description: (payload) =>\n      translate(\"navigated_to\") + \" \" + serializeStep(payload),\n  },\n};\n\nfunction History({ history = [] }) {\n  const renderAction = (action, date, index) => {\n    if (actionsSerialization[action.type]) {\n      return actionsSerialization[action.type].description(action.payload);\n    }\n    return \"nope\";\n  };\n  const csv = `heure;action\n${history\n  .map(\n    ({ action, date }, index) =>\n      `${new Date(date).toLocaleTimeString()};${renderAction(\n        action,\n        date,\n        index\n      )}`\n  )\n  .join(\"\\n\")}`;\n  return (\n    <div className=\"history\">\n      <ul className=\"history-details\">\n        {history.map(({ action, date }, index) => {\n          return (\n            <li key={date}>\n              <div>{new Date(date).toLocaleTimeString()}</div>\n              <div>{renderAction(action, date, index)}</div>\n            </li>\n          );\n        })}\n      </ul>\n      <div>\n        <button onClick={() => downloadFile(csv, \"csv\", \"history\")}>\n          {translate(\"download\")}\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default History;\n","import react, { useEffect, useState } from \"react\";\n\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport cx from \"classnames\";\n\nimport translate from \"../helpers/translate\";\n\nimport * as uiDuck from \"../state/duckUi\";\nimport * as dataDuck from \"../state/duckData\";\nimport * as historyDuck from \"../state/duckHistory\";\n\nimport History from \"./History\";\n\nimport metricsList from \"../contents/metrics_list.fr.yml\";\nimport { STEP_METRICS_SORTING } from \"../constants\";\nimport downloadFile from \"../helpers/download\";\n\nfunction StepConclusion({\n  data: { dataikuResults, choosenModel, filters },\n  history,\n  resetApp,\n  setCurrentStep,\n}) {\n  let privacyVariables = Object.entries(filters)\n    .map(([_key, filter]) => filter)\n    .find((f) => f.variables);\n  privacyVariables = privacyVariables && privacyVariables.variables;\n  const csv = `source;${metricsList\n    .map(({ name }) => name)\n    .join(\";\")};variables considérées comme privées\ndataiku;${metricsList.map(({ id }) => dataikuResults[id]).join(\";\")};\ninterface;${metricsList\n    .map(({ id, name }) => {\n      const value =\n        id === \"Privacy\"\n          ? -choosenModel.variables.filter((vName) =>\n              privacyVariables.includes(vName)\n            ).length\n          : choosenModel[id];\n      return value;\n    })\n    .join(\";\")};${privacyVariables.join(\", \")}`;\n  return (\n    <section className=\"single-choice-screen\">\n      <h1>{translate(\"conclusion_screen_title\")}</h1>\n      <div>\n        <h2>{translate(\"conclusion_results_title\")}</h2>\n        <div>\n          <h3>{translate(\"first_model_dataiku\")}</h3>\n          <ul>\n            {metricsList.map(({ id, name }) => {\n              return (\n                <li key={id}>\n                  <span>{name}</span> : {dataikuResults[id]}\n                </li>\n              );\n            })}\n          </ul>\n        </div>\n        <div>\n          <h3>{translate(\"second_model_choosen\")}</h3>\n          <ul>\n            {metricsList.map(({ id, name }) => {\n              const value =\n                id === \"Privacy\"\n                  ? -choosenModel.variables.filter((vName) =>\n                      privacyVariables.includes(vName)\n                    ).length\n                  : choosenModel[id];\n              return (\n                <li key={id}>\n                  <span>{name}</span> : {value}\n                </li>\n              );\n            })}\n          </ul>\n        </div>\n        <div>\n          <button onClick={() => downloadFile(csv, \"csv\", \"modeles_expe\")}>\n            {translate(\"download\")}\n          </button>\n        </div>\n      </div>\n      <div>\n        <h2>{translate(\"conclusion_history_title\")}</h2>\n        <History history={history} />\n      </div>\n\n      <div>\n        <button\n          onClick={() => {\n            resetApp();\n            setCurrentStep(STEP_METRICS_SORTING);\n          }}\n        >\n          {translate(\"restart\")}\n        </button>\n      </div>\n    </section>\n  );\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    ...ownProps,\n    ...state,\n    ...uiDuck.selector(state.ui),\n    ...dataDuck.selector(state.data),\n    ...historyDuck.selector(state.history),\n  };\n};\n\nconst mapDispatchToProps = (dispatch) =>\n  bindActionCreators(\n    {\n      ...uiDuck,\n      ...dataDuck,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StepConclusion);\n","import react, { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\n\nimport * as uiDuck from \"../state/duckUi\";\nimport * as dataDuck from \"../state/duckData\";\nimport StepNav from \"./StepNav\";\n\nimport \"./Container.scss\";\n\nimport StepContainer from \"./StepContainer\";\nimport Header from \"./Header\";\nimport StepDataikuIntro from \"./StepDataikuIntro\";\nimport StepEuLegislation from \"./StepEuLegislation\";\nimport StepMetricsIntro from \"./StepMetricsIntro\";\nimport SortScreen from \"./SortScreen\";\nimport MainChoiceScreen from \"./MainChoiceScreen\";\nimport SecondChoiceScreen from \"./SecondChoiceScreen\";\nimport DataikuInputs from \"./DataikuInputs\";\nimport SingleChoiceScreen from \"./SingleChoiceScreen\";\nimport StepConclusion from \"./StepConclusion\";\n\nimport {\n  STEP_HEADER,\n  STEP_DATAIKU_PRACTICE,\n  STEP_EU_LEGISLATION,\n  STEP_METRICS_EXPLANATION,\n  STEP_METRICS_SORTING,\n  STEP_MAIN_CHOICE,\n  STEP_SECONDARY_CHOICE_1,\n  STEP_SECONDARY_CHOICE_2,\n  STEP_MODEL_CHOICE,\n  STEP_DATAIKU_FEEDBACK,\n  STEP_CONCLUSION,\n} from \"../constants\";\n\nfunction Container({\n  ui: { currentStep, numberOfSteps },\n  setCurrentStep,\n  startApp,\n  getData,\n}) {\n  useEffect(() => {\n    startApp();\n    getData();\n  }, []);\n  const renderStep = (stepIndex = 0) => {\n    switch (stepIndex) {\n      // header\n      case STEP_HEADER:\n        return <Header />;\n      // intro 1 (dataiku outputs)\n      case STEP_DATAIKU_PRACTICE:\n        return <StepDataikuIntro />;\n      // intro 2 (eu priniples)\n      case STEP_EU_LEGISLATION:\n        return <StepEuLegislation />;\n      // intro 3 (variables presentation)\n      case STEP_METRICS_EXPLANATION:\n        return <StepMetricsIntro />;\n      // sort variables\n      case STEP_METRICS_SORTING:\n        return <SortScreen />;\n      // main choice\n      case STEP_MAIN_CHOICE:\n        return <MainChoiceScreen />;\n      // second choice\n      case STEP_SECONDARY_CHOICE_1:\n        return (\n          <SecondChoiceScreen\n            metricsExtent={[2, 3]}\n            previousExtents={[[0, 1]]}\n          />\n        );\n      case STEP_SECONDARY_CHOICE_2:\n        return (\n          <SecondChoiceScreen\n            nextStep={STEP_MODEL_CHOICE}\n            previousExtents={[\n              [0, 1],\n              [2, 3],\n            ]}\n            metricsExtent={[3, 4]}\n          />\n        );\n      case STEP_MODEL_CHOICE:\n        return <SingleChoiceScreen />;\n      case STEP_DATAIKU_FEEDBACK:\n        return <DataikuInputs />;\n      case STEP_CONCLUSION:\n        return <StepConclusion />;\n      default:\n        return <>Step {stepIndex}</>;\n    }\n  };\n\n  let steps = new Array(numberOfSteps);\n  for (let i = 0; i < steps.length; i++) {\n    steps[i] = i;\n  }\n  return (\n    <div className=\"container\">\n      {steps.map((s, index) => (\n        <StepContainer key={index} active={index === currentStep}>\n          {renderStep(index)}\n        </StepContainer>\n      ))}\n      <StepNav\n        {...{\n          currentStep,\n          setCurrentStep,\n          numberOfSteps,\n        }}\n      />\n    </div>\n  );\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  ...ownProps,\n  ...state,\n  ...uiDuck.selector(state.ui),\n  ...dataDuck.selector(state.data),\n});\n\nconst mapDispatchToProps = (dispatch) =>\n  bindActionCreators(\n    {\n      ...uiDuck,\n      ...dataDuck,\n    },\n    dispatch\n  );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Container);\n","/**\n * Fonio Reducers Endpoint\n * ===================================\n *\n * Combining the app's reducers.\n */\nimport { combineReducers } from \"redux\";\nimport { rememberReducer } from \"redux-remember\";\nimport data from \"./duckData\";\nimport history from \"./duckHistory\";\nimport ui from \"./duckUi\";\n\nexport default rememberReducer(\n  combineReducers({\n    data,\n    history,\n    ui,\n  })\n);\n","/**\n * Promise middleware\n * ===================================\n * If a promise is passed in an action,\n * this middleware will resolve it and dispatch related actions names\n * (ACTION_NAME when started, then ACTION_NAME_SUCCESS or ACTION_NAME_FAIL depending on promise outcome)\n */\n\nconst promiseMiddleware = () => ({ dispatch, getState }) => (next) => (\n  action\n) => {\n  // If the action is a function, execute it\n  if (typeof action === \"function\") {\n    return action(dispatch, getState);\n  }\n\n  const { promise, type, ...rest } = action;\n\n  // If there is no promise in the action, ignore it\n  if (!promise) {\n    // pass the action to the next middleware\n    return next(action);\n  } else if (typeof promise !== \"function\" || !Promise.resolve(promise)) {\n    console.warn(\n      'passed an action with a \"promise\" prop which is not a promise function, action:',\n      action\n    ); /* eslint  no-console : 0 */\n    return next(action);\n  }\n  // build constants that will be used to dispatch actions\n  const REQUEST = `${type}_PENDING`;\n  const SUCCESS = `${type}_SUCCESS`;\n  const FAIL = `${type}_FAIL`;\n  const RESET = `${type}_RESET`;\n\n  /*\n   * Trigger the action once to dispatch\n   * the fact promise is starting resolving (for loading indication for instance)\n   */\n  next({ ...rest, type: REQUEST });\n  // resolve promise\n  return promise(dispatch, getState)\n    .then((result) => {\n      setTimeout(() => next({ ...rest, type: RESET }), 1000);\n      return next({ ...rest, result, type: SUCCESS });\n    })\n    .catch((error) => next({ ...rest, error, type: FAIL }));\n};\n\nexport default promiseMiddleware;\n","/* eslint import/no-webpack-loader-syntax: off */\nimport logo from \"./logo.svg\";\nimport \"./App.scss\";\n\nimport { Provider } from \"react-redux\";\nimport { Helmet } from \"react-helmet\";\n\nimport Container from \"./components/Container\";\n\nimport configureStore from \"./state/store\";\nimport translate from \"./helpers/translate\";\n\nimport intro from \"!!raw-loader!./contents/global_intro.md\";\n\nconst initialState = {};\n\nconst store = configureStore(initialState);\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <Helmet>\n        <title>{translate(\"site_title\")}</title>\n      </Helmet>\n      <Container />\n    </Provider>\n  );\n}\n\nexport default App;\n","/**\n * Fonio store configuration\n * ===================================\n * Configuring store with appropriate middlewares\n */\nimport { applyMiddleware, createStore, compose } from \"redux\";\nimport rootReducer from \"./rootReducer\";\nimport promiseMiddleware from \"./promiseMiddleware\";\nimport { rememberEnhancer } from \"redux-remember\";\n\n/**\n * Configures store with a possible inherited state and appropriate reducers\n * @param initialState - the state to use to bootstrap the reducer\n * @return {object} store - the configured store\n */\nexport default function configureStore(initialState = {}) {\n  // Compose final middleware with thunk and promises handling\n  const middleware = applyMiddleware(promiseMiddleware());\n  // Create final store and subscribe router in debug env ie. for devtools\n  const createStoreWithMiddleware = window.__REDUX_DEVTOOLS_EXTENSION__\n    ? compose(\n        // related middlewares\n        middleware,\n        // connection to redux dev tools\n        window.__REDUX_DEVTOOLS_EXTENSION__(),\n        rememberEnhancer(window.localStorage, [\"ui\", \"data\", \"history\"])\n      )(createStore)\n    : compose(\n        middleware,\n        rememberEnhancer(window.localStorage, [\"ui\", \"data\", \"history\"])\n      )(createStore);\n\n  const store = createStoreWithMiddleware(rootReducer, initialState);\n  return store;\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","module.exports = [{\"id\":\"age\",\"name\":\"age\",\"description\":null,\"relates_to_privacy\":true},{\"id\":\"credit_history\",\"name\":\"historique de crédit\",\"description\":null,\"relates_to_privacy\":false},{\"id\":\"foreign_worker\",\"name\":\"travailleur étranger\",\"description\":null,\"relates_to_privacy\":true},{\"id\":\"housing\",\"name\":\"logement\",\"description\":null,\"relates_to_privacy\":false},{\"id\":\"installment_as_income_perc\",\"name\":\"installment_as_income_perc\",\"description\":null,\"relates_to_privacy\":false},{\"id\":\"other_debtors\",\"name\":\"other_debtors\",\"description\":null,\"relates_to_privacy\":false},{\"id\":\"personal._status\",\"name\":\"statut personnel\",\"description\":null,\"relates_to_privacy\":true},{\"id\":\"present_emp_since\",\"name\":\"emploi actuel depuis\",\"description\":null,\"relates_to_privacy\":false},{\"id\":\"property\",\"name\":\"propriétaire\",\"description\":null,\"relates_to_privacy\":false},{\"id\":\"telephone\",\"name\":\"téléphone\",\"description\":null,\"relates_to_privacy\":true},{\"id\":\"account_check_status\",\"name\":\"statut du compte\",\"description\":null,\"relates_to_privacy\":false},{\"id\":\"credits_this_bank\",\"name\":\"crédits précédents dans cette banque\",\"description\":null,\"relates_to_privacy\":false},{\"id\":\"other_installment_plans\",\"name\":\"autres plans d'installation\",\"description\":null,\"relates_to_privacy\":false},{\"id\":\"sex\",\"name\":\"sexe\",\"description\":null,\"relates_to_privacy\":true},{\"id\":\"credit_amount\",\"name\":\"montant du crédit\",\"description\":null,\"relates_to_privacy\":false},{\"id\":\"savings\",\"name\":\"épargnes\",\"description\":null,\"relates_to_privacy\":false},{\"id\":\"people_under_maintenance\",\"name\":\"personnes à charge\",\"description\":null,\"relates_to_privacy\":false},{\"id\":\"present_res_since\",\"name\":\"résidence actuelle depuis\",\"description\":null,\"relates_to_privacy\":false},{\"id\":\"job\",\"name\":\"emploi\",\"description\":null,\"relates_to_privacy\":false},{\"id\":\"duration_in_month\",\"name\":\"durée en mois\",\"description\":null,\"relates_to_privacy\":false},{\"id\":\"purpose\",\"name\":\"objectif\",\"description\":null,\"relates_to_privacy\":false}]","module.exports = {\"site_title\":\"Pratiques de l'IA\",\"step\":\"étape\",\"next_step\":\"continuer\",\"step_1_title\":\"Étape 1\",\"step_2_title\":\"Étape 2\",\"step_3_title\":\"Étape 3\",\"sort_screen_title\":\"Classer les métriques\",\"sort_screen_prompt\":\"Veuillez classer les indicateurs dans l'ordre qui vous semble être celui du plus important au moins important\",\"main_choice_screen_title\":\"Sélectionner des modèles dans les deux dimensions les plus importantes\",\"main_choice_screen_intro\":\"Veuillez sélectionnez des modèles à partir des deux indicateurs que vous avez définis comme les plus importants\",\"second_choice_screen_title\":\"Sélectionner des modèles dans les autres dimensions\",\"second_choice_screen_intro\":\"Veuillez sélectionnez des modèles dans les modèles déjà choisis\",\"model_choice_screen_title\":\"Choisir un modèle\",\"model_choice_screen_intro\":\"Veuillez sélectionnez le modèle qui correspond à vos préférences\",\"dataiku_input_screen_title\":\"Avant de voir vos résultats, entrez les métriques de votre première expérience\",\"dataiku_input_screen_intro\":\"Veuillez renseigner les informations pour les métriques fournies\",\"conclusion_screen_title\":\"Conclusion\",\"conclusion_results_title\":\"Vos résultats\",\"conclusion_history_title\":\"Votre historique\",\"restart\":\"Recommencer\",\"navigated_to\":\"A navigué sur\",\"add_filters\":\"A ajouté des filtres pour les indicateurs\",\"app_header_view\":\"l'accueil\",\"dataiku_practice_view\":\"la vue dédiée à la phase d'expérimentation avec Heroku\",\"eu_legislation_view\":\"la vue dédiée à la legislation européenne\",\"metrics_explanation_view\":\"la vue dédiée à l'explication des indicateurs\",\"metrics_sorting_view\":\"la vue dédiée à l'ordonnancement des indicateurs\",\"main_filter_view\":\"la vue dédiée au filtre principal\",\"secondary_filter_view\":\"la vue dédiée au filtre secondaire\",\"tertiary_filter_view\":\"la vue dédiée au filtre tertiaire\",\"model_choice_view\":\"la vue dédiée au choix du modèle\",\"dataiku_feedback_view\":\"la vue dédiée à entrer les informations heroku\",\"conclusion_view\":\"la vue de conclusion\",\"set_choosen_model\":\"A choisi son modèle\",\"set_dataiku_results\":\"A entré les résultats obtenus via dataiku\",\"changed_metrics_order_to\":\"A changé l'ordre des indicateurs pour\",\"started_the_app\":\"A commencé l'expérimentation\",\"and\":\"et\",\"download\":\"télécharger\",\"first_model_dataiku\":\"Premier modèle issu de l'expérience avec Dataiku\",\"second_model_choosen\":\"Second modèle issu de l'expérience avec cette interface\"}"],"sourceRoot":""}