(this["webpackJsonpexp-ai"]=this["webpackJsonpexp-ai"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},17:function(e,t){e.exports=[{name:"Performance",id:"performance",color:"#0096D1",short_description:"L'AUC est un nombre entre 0 et 1 mesurant la performance de l'algorithme. Un algorithme performant poss\xe8de un AUC proche de 1. Comme traditionnellement dans l\u2019industrie du Machine Learning, on supposera que le data scientist banquier est d\u2019abord incit\xe9 sur le crit\xe8re de la performance de son algorithme car l\u2019AUC est proportionnel au gain financier procur\xe9 par l\u2019algorithme.",iteration:0},{name:"Disparate impact (femmes/hommes)",id:"fairness_disparate_impact",color:"#984F0E",short_description:"il s\u2019agit du ratio du pourcentage d\u2019acceptation du cr\xe9dit chez les femmes sur le pourcentage d\u2019acceptation chez les hommes. Lorsque ce ratio est \xe9gal \xe0 1, on consid\xe9rera qu\u2019il n\u2019y pas d\u2019effet disparate entre les hommes et les femmes. La r\xe8gle des 80% est utilis\xe9e par le droit am\xe9ricain pour d\xe9tecter des effets discriminants : si le ratio du disparate impact est en-dessous de 80% alors on dira qu'il y a effet disparate entre hommes et femmes.",iteration:0},{name:"Disparate impact (travailleur \xe9tranger)",id:"disparate_impact_foreign",color:"#8D5F5B",short_description:"il s\u2019agit du ratio du pourcentage d\u2019acceptation du cr\xe9dit chez les travailleurs \xe9trangers sur le pourcentage d\u2019acceptation chez les travailleurs non-\xe9trangers. Lorsque ce ratio est \xe9gal \xe0 1, on consid\xe9rera qu\u2019il n\u2019y pas d\u2019effet disparate entre les hommes et les femmes. La r\xe8gle des 80% est utilis\xe9e par le droit am\xe9ricain pour d\xe9tecter des effets discriminants : si le ratio du disparate impact est en-dessous de 80% alors on dira qu'il y a effet disparate entre hommes et femmes.",iteration:1},{name:"Interpr\xe9tabilit\xe9",id:"interpretability",color:"#ECC0A5",type:"integer",short_description:"Selon la l\xe9gislation (RGPD), les demandeurs ont le droit d'exiger une explication des d\xe9cisions. On consid\xe8rera que l\u2019oppos\xe9 du nombre total de variables dans le mod\xe8le comme un proxy de l\u2019interpr\xe9tabilit\xe9 des algorithmes. En effet, des explications avec 20 variables seront beaucoup plus difficiles \xe0 fournir qu\u2019une explication avec 5 variables.",iteration:2}]},199:function(e,t,n){},200:function(e,t,n){},202:function(e,t,n){},206:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},212:function(e,t,n){},214:function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"SET_METRICS_ORDER",(function(){return w})),n.d(i,"SET_PRIVACY_VARIABLES",(function(){return k})),n.d(i,"ADD_FILTERS",(function(){return R})),n.d(i,"SET_CHOOSEN_MODEL",(function(){return V})),n.d(i,"SET_DATAIKU_RESULTS",(function(){return I})),n.d(i,"SET_PREVIOUS_MODEL",(function(){return P})),n.d(i,"RESET_APP",(function(){return M})),n.d(i,"resetApp",(function(){return A})),n.d(i,"getData",(function(){return F})),n.d(i,"setMetricsOrder",(function(){return D})),n.d(i,"setPrivacyVariables",(function(){return L})),n.d(i,"addFilters",(function(){return q})),n.d(i,"setChoosenModel",(function(){return U})),n.d(i,"setDataikuResults",(function(){return z})),n.d(i,"setPreviousModel",(function(){return B})),n.d(i,"default",(function(){return X})),n.d(i,"selector",(function(){return K}));var r={};n.r(r),n.d(r,"SET_CURRENT_STEP",(function(){return Y})),n.d(r,"SET_ITERATION_NUMBER",(function(){return G})),n.d(r,"SET_METRICS_ORDER_IS_VALIDATED",(function(){return J})),n.d(r,"SET_MAIN_CHOICE_IS_VALIDATED",(function(){return Q})),n.d(r,"START_APP",(function(){return Z})),n.d(r,"setCurrentStep",(function(){return $})),n.d(r,"setMetricsOrderIsValidated",(function(){return ee})),n.d(r,"setMainChoiceIsValidated",(function(){return te})),n.d(r,"setIterationNumber",(function(){return ne})),n.d(r,"startApp",(function(){return ie})),n.d(r,"default",(function(){return ae})),n.d(r,"selector",(function(){return ce}));var a=n(1),c=n(0),s=n.n(c),o=n(13),l=n.n(o),u=(n(103),n(104),n(11)),d=n(86),b=n(2),j=n(3),p=n(4),f=n(8),m=n(19),O=n(37),v=function(e,t,n){var i=e.replace("SET_","").toLowerCase().replace(/(_[a-z])/gi,(function(e,t){return t.substr(1).toUpperCase()}));return Object(b.a)(Object(b.a)({},n),{},Object(p.a)({},i,t))},h=n(18),_=n(89),x=n.n(_),g=n(226),y=function(){return new Promise((function(e,t){x()("".concat("/exp-ai","/models-sample.csv")).then((function(t){var n=t.data;e(function(e){return e.map((function(e,t){return Object(b.a)(Object(b.a)({},e),{},{variables:e.nom_modele.split(" "),nom_modele:void 0,id:t})}))}(Object(g.a)(n)))})).catch(t)}))},S=n(17),N=n.n(S),E=n(38),C=n.n(E),T="GET_DATA",w="SET_METRICS_ORDER",k="SET_PRIVACY_VARIABLES",R="ADD_FILTERS",V="SET_CHOOSEN_MODEL",I="SET_DATAIKU_RESULTS",P="SET_PREVIOUS_MODEL",M="RESET_APP",A=function(){return{type:M}},F=function(e){return{type:T,payload:e,promise:function(){return y()}}},D=function(e){return{type:w,payload:e}},L=function(e){return{type:k,payload:e}},q=function(e){return{type:R,payload:e}},U=function(e){return{type:V,payload:e}},z=function(e){return{type:I,payload:e}},B=function(e){return{type:P,payload:e}},H=C.a.reduce((function(e,t){var n=t.relates_to_privacy,i=t.id;return Object(b.a)(Object(b.a)({},e),{},Object(p.a)({},i,n))}),{}),W={models:[],metricsOrder:Object(h.a)(N.a.filter((function(e){return 0===e.iteration}))),filters:{},choosenModel:void 0,dataikuResults:{},privacyVariables:H,previousModel:void 0};var X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0,n=t.payload,i=t.result;switch(t.type){case M:return Object(b.a)(Object(b.a)({},W),{},{models:e.models});case"".concat(T):return e;case"".concat(T,"_SUCCESS"):return Object(b.a)(Object(b.a)({},e),{},{models:i});case"".concat(T,"_ERROR"):return e;case k:case w:case P:return v(t.type,n,e);case R:return Object(b.a)(Object(b.a)({},e),{},{filters:Object(b.a)(Object(b.a)({},e.filters),n)});case J:return Object(b.a)(Object(b.a)({},e),{},{filters:W.filters});case I:case V:return v(t.type,n,e);default:return e}},K=Object(O.a)({models:function(e){return e.models},metricsOrder:function(e){return e.metricsOrder},filters:function(e){return e.filters},choosenModel:function(e){return e.choosenModel},dataikuResults:function(e){return e.dataikuResults},privacyVariables:function(e){return e.privacyVariables},previousModel:function(e){return e.previousModel}}),Y="SET_CURRENT_STEP",G="SET_ITERATION_NUMBER",J="SET_METRICS_ORDER_IS_VALIDATED",Q="SET_MAIN_CHOICE_IS_VALIDATED",Z="START_APP",$=function(e){return{type:Y,payload:e}},ee=function(e){return{type:J,payload:e}},te=function(e){return{type:Q,payload:e}},ne=function(e){return{type:G,payload:e}},ie=function(e){return{type:Z,payload:e}},re={currentStep:0,numberOfSteps:8,metricsOrderIsValidated:!1,mainChoiceIsValidated:!1,iterationNumber:0};var ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case M:return re;case Y:case G:return v(t.type,n,e);case J:return Object(b.a)(Object(b.a)({},e),{},{metricsOrderIsValidated:n,mainChoiceIsValidated:!!n&&e.mainChoiceIsValidated});case Q:return Object(b.a)(Object(b.a)({},e),{},{mainChoiceIsValidated:n});case w:return Object(b.a)(Object(b.a)({},e),{},{metricsOrderIsValidated:!1});default:return e}},ce=Object(O.a)({currentStep:function(e){return e.currentStep},numberOfSteps:function(e){return e.numberOfSteps},metricsOrderIsValidated:function(e){return e.metricsOrderIsValidated},mainChoiceIsValidated:function(e){return e.mainChoiceIsValidated},iterationNumber:function(e){return e.iterationNumber}}),se=n(7),oe=n.n(se);n(125);var le=function(e){var t=e.currentStep,n=e.setCurrentStep,i=e.steps;return Object(a.jsx)("nav",{className:"step-nav",children:Object(a.jsx)("ul",{className:"step-nav-items-container",children:Object.entries(i).map((function(e){var i=Object(j.a)(e,2),r=i[0],c=i[1];return Object(a.jsx)("li",{className:oe()("step-nav-item",{active:+r===t,disabled:c.disabled}),onClick:function(){return n(+r)},"data-for":"tooltip","data-tip":c.title,"data-effect":"solid","data-place":"left"},r)}))})})},ue=(n(126),n(9)),de=n(225);n(127);var be=function(e){var t=e.children,n=e.active,i=e.style,r=void 0===i?{}:i,s=Object(ue.a)(e,["children","active","style"]),o=Object(c.useRef)(null);return Object(c.useEffect)((function(){n&&setTimeout((function(){document.querySelector("html").scrollTo({top:0,behavior:"smooth"})}),500)}),[n]),Object(a.jsx)(de.a,{nodeRef:o,in:n,timeout:300,children:function(e){return Object(a.jsx)("div",Object(b.a)(Object(b.a)({className:oe()("step-container",e),ref:o},s),{},{style:Object(b.a)({},r),children:t}))}})},je=n(90),pe=n.n(je),fe=n(44),me=n.n(fe);var Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fr";if("fr"===t)return me.a[e]||console.warn("unstranslated key: ",e),me.a[e]||e};var ve=function(e){var t=e.currentStep,n=e.onSetCurrentStep,i=e.onPreviousStep,r=e.disabled,c=e.backwardEnabled,s=e.onSubmit,o=e.submitMessage,l=e.relativePosition,u=Object(ue.a)(e,["currentStep","onSetCurrentStep","onPreviousStep","disabled","backwardEnabled","onSubmit","submitMessage","relativePosition"]);return Object(a.jsxs)("div",{className:oe()("continue-button-container",{"backward-enabled":c,"relative-position":l}),children:[Object(a.jsx)("button",Object(b.a)(Object(b.a)({disabled:r,onClick:function(e){e.preventDefault(),e.stopPropagation(),"function"===typeof s?s():n(t+1)},className:"continue-button next"},u),{},{type:"button",children:o||Oe("next_step")})),c?Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),"function"===typeof i?i():n(t-1)},className:"continue-button previous",type:"button",children:Oe("previous_step")}):null]})};var he=Object(u.b)((function(e,t){return Object(b.a)(Object(b.a)(Object(b.a)({},t),e),ce(e.ui))}),(function(e){return Object(f.b)(Object(b.a)({},r),e)}))((function(e){var t=e.setCurrentStep;return Object(a.jsxs)("header",{className:"header contents-wrapper",children:[Object(a.jsxs)("div",{className:"contents-container",children:[Object(a.jsx)("h1",{className:"header-title",children:Oe("site_title")}),Object(a.jsx)("div",{className:"emphasis",children:Object(a.jsx)(pe.a,{source:"Vous participez \xe0 une enqu\xeate dans le cadre de la conception d\u2019un outil de Machine Learning. Cette enqu\xeate est r\xe9alis\xe9e par l\u2019Institut Mines-T\xe9l\xe9com et Sciences Po dans le cadre d\u2019un travail de recherche.\n"})})]}),Object(a.jsx)(ve,{onClick:function(){return t(1)}})]})})),_e=n(52),xe=n.n(_e);var ge=Object(u.b)((function(e,t){return Object(b.a)(Object(b.a)(Object(b.a)({},t),e),ce(e.ui))}),(function(e){return Object(f.b)(Object(b.a)({},r),e)}))((function(e){var t=e.setCurrentStep,n=e.ui.iterationNumber;return Object(a.jsxs)("header",{className:"header contents-wrapper",children:[Object(a.jsx)("div",{className:"contents-container",children:xe.a.filter((function(e){return e.iteration===n})).map((function(e){var t=e.id,n=e.src;return Object(a.jsxs)("div",{className:"provocation-image-container",children:[Object(a.jsx)("h1",{children:Oe("provocation_intro")}),Object(a.jsx)("img",{src:"".concat("/exp-ai","/images/").concat(n),alt:t},t)]})}))}),Object(a.jsx)(ve,{onClick:function(){return t(2)}})]})})),ye=n(53),Se=N.a.reduce((function(e,t){var n=t.id,i=t.color;return Object(b.a)(Object(b.a)({},e),{},Object(p.a)({},n,i))}),{}),Ne=function(e,t,n){var i=Array.from(e),r=i.splice(t,1),a=Object(j.a)(r,1)[0];return i.splice(n,0,a),i};var Ee=Object(u.b)((function(e,t){return Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({},t),e),ce(e.ui)),K(e.data))}),(function(e){return Object(f.b)(Object(b.a)(Object(b.a)({},r),i),e)}))((function(e){var t=e.ui,n=t.metricsOrderIsValidated,i=(t.iterationNumber,e.data.metricsOrder),r=e.setCurrentStep,s=e.setMetricsOrder,o=e.setMetricsOrderIsValidated,l=e.currentStep,u=Object(c.useState)(!1),d=Object(j.a)(u,2),p=d[0],f=d[1];return Object(c.useEffect)((function(){setTimeout((function(){return m.a.rebuild()}))}),[l]),Object(a.jsxs)("section",{className:"sort-screen",children:[Object(a.jsx)("h1",{className:"step-title",children:Oe("sort_screen_title")}),Object(a.jsx)("p",{className:"instructions",children:Oe("sort_screen_prompt")}),Object(a.jsx)("p",{className:"instructions more-instructions",children:Oe("sort_screen_prompt_details")}),Object(a.jsx)(ye.a,{onDragEnd:function(e){if(e.destination){var t=Ne(i,e.source.index,e.destination.index);s(t)}},children:Object(a.jsx)(ye.c,{droppableId:"droppable",children:function(e,t){return Object(a.jsxs)("div",Object(b.a)(Object(b.a)({},e.droppableProps),{},{ref:e.innerRef,className:oe()("draggable-list",{"is-dragging":t.isDraggingOver}),children:[i.map((function(e,t){var n=function(){var e=Ne(i,t,t+1);s(e)},r=function(){var e=Ne(i,t,t-1);s(e)};return Object(a.jsx)(ye.b,{draggableId:e.name,index:t,children:function(c,s){return Object(a.jsxs)("div",Object(b.a)(Object(b.a)(Object(b.a)({ref:c.innerRef},c.draggableProps),c.dragHandleProps),{},{className:oe()("draggable-item",{"is-dragged":s.isDragging}),style:c.draggableProps.style,children:[Object(a.jsxs)("h3",{className:"sortable-title",children:[Object(a.jsx)("span",{children:Object(a.jsx)("span",{className:"number-indicator",style:{background:Se[e.id]},children:Object(a.jsx)("span",{children:t+1})})}),Object(a.jsx)("span",{className:oe()("move-btn first",{"is-disabled":t===i.length-1}),"data-for":"sorting","data-tip":Oe("move_down"),"data-place":"top","data-effect":"solid",onClick:n,children:Object(a.jsx)("span",{children:Object(a.jsx)("span",{children:"\u25bc"})})}),Object(a.jsx)("span",{className:oe()("move-btn last",{"is-disabled":0===t}),"data-for":"sorting","data-tip":Oe("move_up"),"data-place":"top","data-effect":"solid",onClick:r,children:Object(a.jsx)("span",{children:Object(a.jsx)("span",{children:"\u25b2"})})}),Object(a.jsxs)("span",{className:"main-title",children:[e.name," "]}),Object(a.jsx)("p",{className:oe()("metrics-description",{"is-visible":p}),children:e.short_description})]}),Object(a.jsx)(m.a,{id:"sorting"})]}))}},e.name)})),e.placeholder]}))}})}),Object(a.jsx)("div",{style:{marginBottom:"2rem"},children:Object(a.jsx)("button",{className:oe()({"is-active":p}),onClick:function(){return f(!p)},children:Oe("show-descriptions")})}),Object(a.jsx)(ve,{currentStep:l,onSetCurrentStep:r,disabled:n,onSubmit:function(){o(!0),r(3)},submitMessage:Oe("validate"),relativePosition:!0,backwardEnabled:!0})]})}));n(199),n(200);var Ce=function(e){var t=e.tip,n=Object(ue.a)(e,["tip"]);return Object(a.jsx)("span",Object(b.a)(Object(b.a)({className:"info-tip","data-effect":n.dataEffect||"solid","data-tip":t},n),{},{children:Object(a.jsx)("span",{children:"?"})}))};var Te=function(e){var t=e.metrics;return Object(a.jsxs)("div",{className:"metrics-crossing-indicator",children:[Object(a.jsx)("ul",{className:"crossing-indicator-items",children:t.map((function(e){return Object(a.jsxs)("li",{className:oe()("crossing-indicator-item",{active:e.active}),style:{background:Se[e.id]},children:[e.name," ",Object(a.jsx)(Ce,{"data-place":"right","data-effect":"solid",tip:e.short_description})]},e.name)}))}),Object(a.jsx)(m.a,{})]})},we=n(223),ke=n(222),Re=n(91),Ve=n.n(Re),Ie=(n(202),n(221)),Pe=n(224),Me=n(31);n(206);var Ae=function(e){var t=e.data,n=e.xVariable,i=e.yVariable,r=e.filteredVariables,s=e.width,o=void 0===s?500:s,l=e.height,u=void 0===l?500:l,d=e.axisMargin,p=void 0===d?30:d,f=e.padding,m=void 0===f?10:f,O=e.brush,v=Object(j.a)(O.x,2),h=v[0],_=v[1],x=Object(j.a)(O.y,2),g=x[0],y=x[1],S=e.onBrushChange,E=e.readOnly,C=void 0!==E&&E,T=e.minified,w=void 0!==T&&T,k=e.highlightedNodeId,R=Object(ue.a)(e,["data","xVariable","yVariable","filteredVariables","width","height","axisMargin","padding","brush","onBrushChange","readOnly","minified","highlightedNodeId"]),V=Object(c.useState)([h,_]),I=Object(j.a)(V,2),P=Object(j.a)(I[0],2),M=P[0],A=P[1],F=I[1],D=Object(c.useState)([g,y]),L=Object(j.a)(D,2),q=Object(j.a)(L[0],2),U=q[0],z=q[1],B=L[1],H=w?3:10;Object(c.useEffect)((function(){F([h,_]),B([g,y])}),[h,_,g,y]);var W=function(e){return"Privacy"===n?-e.variables.filter((function(e){return r.includes(e)})).length:+e[n]},X=function(e){return"Privacy"===i?-e.variables.filter((function(e){return r.includes(e)})).length:+e[i]},K=Object(Ie.a)(t,W),Y=Object(Ie.a)(t,X),G=Object(Pe.a)().domain(K).range([p+m,o-m]),J=Object(Pe.a)().domain(Y.reverse()).range([m,u-p-m]),Q=Object(c.useState)(void 0),Z=Object(j.a)(Q,2),$=Z[0],ee=Z[1],te=Object(c.useState)([0,0]),ne=Object(j.a)(te,2),ie=ne[0],re=ne[1],ae=Object(c.useState)(!1),ce=Object(j.a)(ae,2),se=ce[0],le=ce[1],de=Object(c.useRef)(null);Object(c.useEffect)((function(){var e=function(e){if(!C&&se){var t=de.current.getBoundingClientRect(),n=G.invert(e.clientX-t.x),i=J.invert(e.clientY-t.y);F([M,n]),B([U,i])}},t=function(){C||(se&&M!==A&&U!==z?S({x:[+M.toFixed?+M.toFixed(3):+M,+A.toFixed?+A.toFixed(3):+A].sort(),y:[+U.toFixed?+U.toFixed(3):+U,+z.toFixed?+z.toFixed(3):+z].sort()}):(F([h,_]),B([g,y])),le(!1))};return window.addEventListener("mouseup",t),window.addEventListener("mousemove",e),function(){window.removeEventListener("mouseup",t),window.removeEventListener("mousemove",e)}}),[se,M,A,U,z]);var be=G(Object(ke.a)([M,A]))<p+m?p+m:G(Object(ke.a)([M,A])),je=G(Object(we.a)([M,A]))-be,pe=J(Object(ke.a)([U,z]))-Math.abs(J(z)-J(U)),fe=Math.abs(J(z)-J(U));return fe=fe+pe>u-p-m?u-p-m-pe:fe,Object(a.jsxs)("div",Object(b.a)(Object(b.a)({className:"brushable-scatterplot-container"},R),{},{children:[Object(a.jsxs)("svg",{width:o,height:u,ref:de,className:oe()("brushable-scatterplot",{"is-brushing":se,"is-readonly":C,"is-minified":w}),onMouseDown:function(e){if(!C){le(!0),ee(void 0);var t=de.current.getBoundingClientRect(),n=G.invert(e.clientX-t.x),i=J.invert(e.clientY-t.y);F([n,n]),B([i,i])}},children:[Object(a.jsx)("g",{transform:"translate(0, ".concat(u-p-m,")"),className:"x-axis",children:Object(a.jsx)(Me.Axis,Object(b.a)(Object(b.a)({},Object(Me.axisPropsFromTickScale)(G,H)),{},{style:{orient:Me.BOTTOM}}))}),Object(a.jsx)("g",{transform:"translate(".concat(p+m,", 0)"),className:"y-axis",children:Object(a.jsx)(Me.Axis,Object(b.a)(Object(b.a)({},Object(Me.axisPropsFromTickScale)(J,H)),{},{style:{orient:Me.LEFT}}))}),M&&A&&U&&z?Object(a.jsx)("rect",{x:be,y:pe,width:je,height:fe,className:"brush"}):null,Object(a.jsx)("g",{className:"chart",children:t.map((function(e,t){var n=function(){C||w||se||$&&$.id===e.id||(ee(e),re([10+G(W(e)),J(X(e))]))},i=W(e),r=X(e),c=[M,A].sort((function(e,t){return e>t?1:-1})),s=[U,z].sort((function(e,t){return e>t?1:-1})),l=i>=c[0]&&i<=c[1]&&r>=s[0]&&r<=s[1];return Object(a.jsx)("circle",{cx:G(i),cy:J(r),className:oe()("dot",{"is-active":l,"is-highlighted":k&&k===e.id}),onMouseEnter:n,onMouseMove:n,onMouseLeave:function(){C||w||se||!$||$.id!==e.id||ee(void 0)},r:o/200},e.id)}))})]}),Object(a.jsx)("div",{className:oe()("chart-tooltip",{"is-active":$}),style:{left:ie[0],top:ie[1]},children:$&&!C&&!w&&Object(a.jsxs)("ul",{children:[N.a.map((function(e){var t=e.id,c=e.name,s=$[t];return s=parseFloat(s).toFixed(3),Object(a.jsxs)("li",{className:oe()("tooltip-info",{active:t===n||t===i}),children:[c," :"," ","Privacy"===t?-$.variables.filter((function(e){return r.includes(e)})).length:s]},t)})),Object(a.jsxs)("li",{children:["Variables : ",$.variables.join(", ")]})]})})]}))},Fe=n(40);n(208),Fe.a.createSliderWithTooltip(Fe.a.Range);function De(e){var t=e.onChange,n=e.validate,i=e.value,r=Object(ue.a)(e,["onChange","validate","value"]),s=Object(c.useState)(i),o=Object(j.a)(s,2),l=o[0],u=o[1],d=function(){n(l)?t(l):u(i)};return Object(c.useEffect)((function(){u(i)}),[i]),Object(a.jsx)("form",{className:"input-container",onSubmit:function(e){e.preventDefault(),d()},children:Object(a.jsx)("input",Object(b.a)(Object(b.a)({},r),{},{onChange:function(e){u(e.target.value.replace(",","."))},onBlur:d,value:l}))})}var Le=function(e){var t=e.metric,n=e.values,i=(e.min,e.max,e.onRangeChange),r=e.axis,c=void 0===r?"abscisses":r,s=e.onLabelClick;return Object(a.jsxs)("div",{className:"variable-inputs",children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)("h5",{children:[Object(a.jsxs)("code",{onClick:s,style:{background:Se[t.id]},children:[c," : ",t.name," ",Object(a.jsx)(Ce,{"data-for":"variable-tip",tip:t.short_description})," "]})," "]}),Object(a.jsx)("div",{className:"details-container",children:Object(a.jsxs)("div",{className:"inputs-container",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"Min "}),Object(a.jsx)(De,{validate:function(e){return!isNaN(e)&&e<n[1]},onChange:function(e){i([e,n[1]])},value:""+n[0],type:"text"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"Max "}),Object(a.jsx)(De,{validate:function(e){return!isNaN(e)&&e>n[0]},value:""+n[1],onChange:function(e){i([n[0],e])},type:"text"})]})]})})]}),Object(a.jsx)(m.a,{id:"variable-tip"})]})};var qe=function(e,t){return t.reduce((function(e,t){return e.filter((function(e){var n=t.variable,i=t.type,r=t.range,a=e[n];switch(t.variables&&(a=-e.variables.filter((function(e){return t.variables.includes(e)})).length),i){case"range":default:var c=r.sort((function(e,t){return e>t?1:-1})),s=Object(j.a)(c,2),o=s[0],l=s[1];return a>=o&&a<=l}}))}),e)};var Ue=Ve()()((function(e){var t=e.metrics,n=e.models,i=e.onSubmit,r=e.onPreviousStep,s=e.filters,o=void 0===s?[]:s,l=e.privacyVariables,u=e.values,d=e.containerWidth,b=(e.containerHeight,e.onChange),p=Object(j.a)(t,2),f=p[0],O=p[1],v=C.a.filter((function(e){var t=e.id;return l[t]})).map((function(e){return e.id})),_=Object(c.useState)(0),x=Object(j.a)(_,2),g=x[0],y=x[1],S=Object(c.useState)(0),N=Object(j.a)(S,2),E=N[0],T=N[1],w=Object(c.useState)(0),k=Object(j.a)(w,2),R=k[0],V=k[1],I=Object(c.useState)(0),P=Object(j.a)(I,2),M=P[0],A=P[1],F=Object(c.useState)(null),D=Object(j.a)(F,2),L=D[0],q=D[1],U=Object(c.useState)(null),z=Object(j.a)(U,2),B=z[0],H=z[1],W=Object(c.useState)(null),X=Object(j.a)(W,2),K=X[0],Y=X[1],G=Object(c.useState)(null),J=Object(j.a)(G,2),Q=J[0],Z=J[1],$=Object(c.useState)(!1),ee=Object(j.a)($,2),te=ee[0],ne=ee[1],ie=Object(c.useState)(!1),re=Object(j.a)(ie,2),ae=re[0],ce=re[1],se=Object(c.useState)(n),le=Object(j.a)(se,2),ue=le[0],de=le[1],be=Object(c.useState)(!!(u&&u.length>1)),je=Object(j.a)(be,2),pe=je[0],fe=je[1];return Object(c.useEffect)((function(){if(!n.length)return null;u&&u.length>1?(q(u[0].range[0]),Z(u[0].range[1]),Y(u[1].range[0]),H(u[1].range[1])):(q(g),Z(M),Y(R),H(E))}),[u]),function(e,t,n){Object(c.useEffect)((function(){var t=setTimeout(e,n);return function(){clearTimeout(t)}}),[n,e].concat(Object(h.a)(t)))}((function(){if(!n.length)return null;if(!f||!O)return null;var e=[].concat(Object(h.a)(o),[{variable:f.id,type:"range",range:[L,Q],variables:"Privacy"===f.id?v:void 0},{variable:O.id,type:"range",range:[K,B],variables:"Privacy"===O.id?v:void 0}]);de(qe(n,e))}),[L,Q,K,B],1e3),Object(c.useEffect)((function(){return n.length?(f=t[0],O=t[1],f&&O?("Privacy"===f.id?(e=-Object(we.a)(n,(function(e){return e.variables.filter((function(e){return-v.includes(e)})).length})),i=-Object(ke.a)(n,(function(e){return e.variables.filter((function(e){return-v.includes(e)})).length}))):(e=Object(ke.a)(n,(function(e){return+e[f.id]})),i=Object(we.a)(n,(function(e){return+e[f.id]}))),"Privacy"===O.id?(r=-Object(we.a)(n,(function(e){return e.variables.filter((function(e){return-v.includes(e)})).length})),a=-Object(ke.a)(n,(function(e){return e.variables.filter((function(e){return-v.includes(e)})).length}))):(r=Object(ke.a)(n,(function(e){return+e[O.id]})),a=Object(we.a)(n,(function(e){return+e[O.id]}))),y(+e.toFixed(3)),A(+i.toFixed(3)),V(+r.toFixed(3)),T(+a.toFixed(3)),void(u||(q(+e.toFixed(3)),Z(+i.toFixed(3)),Y(+r.toFixed(3)),H(+a.toFixed(3))))):null):null;var e,i,r,a}),[n,t]),Object(c.useEffect)((function(){if(!n.length)return null;if(!f||!O)return null;if("Privacy"===f.id){var e=-Object(we.a)(n,(function(e){return e.variables.filter((function(e){return-v.includes(e)})).length})),t=-Object(ke.a)(n,(function(e){return e.variables.filter((function(e){return-v.includes(e)})).length}));y(e),A(t)}if("Privacy"===O.id){var i=-Object(we.a)(n,(function(e){return e.variables.filter((function(e){return v.includes(e)})).length})),r=-Object(ke.a)(n,(function(e){return e.variables.filter((function(e){return v.includes(e)})).length}));V(i),T(r)}}),[v]),f&&O&&n.length?Object(a.jsxs)("div",{className:"filter-form",children:[Object(a.jsx)("div",{className:"columns-container",children:Object(a.jsxs)("div",{className:"column is-main",children:[Object(a.jsx)("div",{className:oe()("axis-container axis-y",{"is-deployed":ae}),children:Object(a.jsx)(Le,{metric:O,values:[K,B],min:R,max:E,onLabelClick:function(){return ce(!ae)},filteredVariables:v,axis:"y",onRangeChange:function(e){var t=Object(j.a)(e,2),n=t[0],i=t[1];if(Y(n),H(i),fe(!0),"function"===typeof b){var r=[{variable:f.id,type:"range",range:[L,Q],variables:"Privacy"===f.id?v:void 0},{variable:O.id,type:"range",range:[+n,+i],variables:"Privacy"===O.id?v:void 0}];b(r)}}})}),Object(a.jsx)(Ae,{data:n,xVariable:f.id,yVariable:O.id,filteredVariables:v,brush:{x:[L,Q],y:[K,B]},onBrushChange:function(e){var t=Object(j.a)(e.x,2),n=t[0],i=t[1],r=Object(j.a)(e.y,2),a=r[0],c=r[1];if(q(+n.toFixed(3)),Z(+i.toFixed(3)),Y(+a.toFixed(3)),H(+c.toFixed(3)),fe(!0),"function"===typeof b){var s=[{variable:f.id,type:"range",range:[+n.toFixed(3),+i.toFixed(3)],variables:"Privacy"===f.id?v:void 0},{variable:O.id,type:"range",range:[+a.toFixed(3),+c.toFixed(3)],variables:"Privacy"===O.id?v:void 0}];b(s)}},width:.85*d,height:400,style:{paddingLeft:.1*d}}),Object(a.jsx)("div",{className:oe()("axis-container axis-x",{"is-deployed":te}),children:Object(a.jsx)(Le,{metric:f,values:[L,Q],min:g,max:M,axis:"x",onLabelClick:function(){return ne(!te)},filteredVariables:v,onRangeChange:function(e){var t=Object(j.a)(e,2),n=t[0],i=t[1];if(q(n),Z(i),fe(!0),"function"===typeof b){var r=[{variable:f.id,type:"range",range:[+n,+i],variables:"Privacy"===f.id?v:void 0},{variable:O.id,type:"range",range:[K,B],variables:"Privacy"===O.id?v:void 0}];b(r)}}})}),Object(a.jsxs)("div",{style:{maxWidth:.4*d},className:"count-container",children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:"count-indicator",children:ue.length})," ","mod\xe8les s\xe9lectionn\xe9s."]}),Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"Faire glisser la souris pour s\xe9lectionner des mod\xe8les."})})]})]})}),Object(a.jsx)(ve,{disabled:!ue.length||!pe,onSubmit:function(e){var t=[{variable:f.id,type:"range",range:[L,Q],variables:"Privacy"===f.id?v:void 0},{variable:O.id,type:"range",range:[K,B],variables:"Privacy"===O.id?v:void 0}];i(t)},submitMessage:Oe("validate"),onPreviousStep:r,backwardEnabled:!0}),Object(a.jsx)(m.a,{id:"tip"})]}):null}));var ze=Object(u.b)((function(e,t){return Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({},t),e),ce(e.ui)),K(e.data))}),(function(e){return Object(f.b)(Object(b.a)(Object(b.a)({},r),i),e)}))((function(e){var t=e.data,n=t.metricsOrder,i=t.models,r=t.filters,c=t.privacyVariables,s=(e.ui.iterationNumber,e.setCurrentStep),o=e.setMainChoiceIsValidated,l=e.addFilters,u=e.currentStep,d=n.map((function(e,t){return Object(b.a)(Object(b.a)({},e),{},{active:t<=1})}));return Object(a.jsxs)("section",{className:"main-choice-screen",children:[Object(a.jsx)("h1",{className:"step-title",children:Oe("main_choice_screen_title")}),Object(a.jsxs)("div",{className:"columns-container",children:[Object(a.jsxs)("aside",{className:"column is-aside",children:[Object(a.jsx)("p",{className:"instructions",children:Oe("main_choice_screen_intro")}),Object(a.jsx)(Te,{metrics:d})]}),Object(a.jsx)("main",{className:"column is-main",children:Object(a.jsx)(Ue,{metrics:n.slice(0,2),models:i,onSubmit:function(e){var t=Object(j.a)(e,2),i=t[0],r=t[1];l({0:i,1:r}),o(!0),n.length<=2?s(7):s(4)},onPreviousStep:function(){s(u-1)},privacyVariables:c,values:r[0]&&r[1]?[r[0],r[1]]:void 0})})]})]})})),Be=(n(209),Fe.a.createSliderWithTooltip(Fe.a.Range)),He=function(e){var t=e.index,n=e.filters,i=e.models,r=e.from,c=e.to,s=e.onNav,o=e.fromName,l=e.toName,u=e.variables,d=e.choosenModel,f=e.highlightedNodeId,m=e.addFilters,O=e.filterModels,v=e.readOnly,h=d?f||d.id:f,_={x:n[r+""].range,y:n[c+""].range},x=0===r?i:O(i,Object.entries(n).filter((function(e){return+Object(j.a)(e,1)[0]<r})).map((function(e){var t=Object(j.a)(e,2);t[0];return t[1]}))),g=1e4,y=function(e,t){var i="x"===e?r+"":c+"";m(Object(p.a)({},i,Object(b.a)(Object(b.a)({},n[i]),{},{range:t})))},S=n[r+""].range,E=n[r+""].variable,C=N.a.find((function(e){return e.id===E})),T=Object(ke.a)(x,(function(e){return+e[E]})),w=Object(we.a)(x,(function(e){return+e[E]})),k=n[c+""].range,R=n[c+""].variable,V=N.a.find((function(e){return e.id===R})),I=Object(ke.a)(x,(function(e){return+e[R]})),P=Object(we.a)(x,(function(e){return+e[R]}));return Object(a.jsxs)("div",{className:"mini-graph-container",children:[Object(a.jsxs)("h5",{className:"mini-graph-title",children:[Object(a.jsx)("div",{children:Object(a.jsx)("span",{onClick:s,className:"number-indicator",children:t+1})}),Object(a.jsxs)("div",{className:"values-container",children:[Object(a.jsxs)("span",{className:"value-container",children:[Object(a.jsxs)("code",{style:{background:Se[E]},children:["x: ",o]}),Object(a.jsx)(Be,{allowCross:!1,tipFormatter:function(e){return e/g},onChange:function(e){var t=Object(j.a)(e,2),n=t[0],i=t[1];y("x",[n/g,i/g])},step:"integer"===C.type?g:void 0,min:T*g,max:w*g,defaultValue:[T*g,w*g],value:[S[0]*g,S[1]*g],style:{width:"100%"}})]}),Object(a.jsxs)("span",{className:"value-container",children:[Object(a.jsxs)("code",{style:{background:Se[R]},children:["y: ",l]}),Object(a.jsx)(Be,{allowCross:!1,tipFormatter:function(e){return e/g},onChange:function(e){var t=Object(j.a)(e,2),n=t[0],i=t[1];y("y",[n/g,i/g])},step:"integer"===V.type?g:void 0,min:I*g,max:P*g,defaultValue:[I*g,P*g],value:[k[0]*g,k[1]*g],style:{width:"100%"}})]})]})]}),Object(a.jsx)(Ae,{data:x,xVariable:E,yVariable:R,filteredVariables:u,brush:_,readOnly:v,minified:!0,highlightedNodeId:h,width:200,height:200,onBrushChange:function(e){var t,i=Object(j.a)(e.x,2),a=i[0],s=i[1],o=Object(j.a)(e.y,2),l=o[0],u=o[1];m((t={},Object(p.a)(t,r+"",Object(b.a)(Object(b.a)({},n[r+""]),{},{range:[a,s]})),Object(p.a)(t,c+"",Object(b.a)(Object(b.a)({},n[c+""]),{},{range:[l,u]})),t))}})]})};var We=Object(u.b)((function(e,t){return Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({},t),e),ce(e.ui)),K(e.data))}),(function(e){return Object(f.b)(Object(b.a)(Object(b.a)({},r),i),e)}))((function(e){var t=e.data,n=t.metricsOrder,i=t.models,r=t.filters,s=t.privacyVariables,o=void 0===s?{}:s,l=e.ui.iterationNumber,u=e.setCurrentStep,d=e.setMainChoiceIsValidated,f=e.addFilters,m=e.metricsExtent;m=void 0===m?[1,2]:m;var O=Object(j.a)(m,2),v=O[0],h=O[1],_=e.previousExtents,x=void 0===_?[]:_,g=(e.nextStep,e.currentStep),y=Object(c.useState)(r),S=Object(j.a)(y,2),N=S[0],E=S[1];return Object(c.useEffect)((function(){E(r)}),[r]),Object.keys(r).length?Object(a.jsxs)("section",{className:"second-choice-screen",children:[Object(a.jsx)("h1",{className:"step-title",children:Oe("second_choice_screen_title")}),Object(a.jsxs)("div",{className:"columns-container",children:[Object(a.jsxs)("aside",{className:"column is-aside",children:[Object(a.jsx)("p",{className:"instructions",children:Oe("second_choice_screen_intro")}),Object(a.jsx)(Te,{metrics:n.filter((function(e){return e.iteration<=l})).map((function(e,t){return Object(b.a)(Object(b.a)({},e),{},{active:t>=v&&t<=h})}))}),Object(a.jsx)("h4",{children:"Vos arbitrages pr\xe9c\xe9dents :"}),Object(a.jsx)("div",{className:"mini-graphs-wrapper",children:x.filter((function(e){var t=Object(j.a)(e,2),n=t[0],i=t[1];return void 0!==N[n+""]&&void 0!==N[i+""]})).map((function(e,t){var c=Object(j.a)(e,2),s=c[0],o=c[1],l=[N[s+""],N[o+""]].find((function(e){return e&&e.variables}));l=l?l.variables:void 0;return Object(a.jsx)(He,Object(b.a)({},{index:t,filters:N,models:i,fromName:n.find((function(e){return e.id===r[s+""].variable})).name,toName:n.find((function(e){return e.id===r[o+""].variable})).name,onNav:function(){var e;switch(t){case 0:e=3;break;case 1:e=4;break;case 2:default:e=5}u(e)},from:s,to:o,variables:l,addFilters:function(e){return E(Object(b.a)(Object(b.a)({},N),e))},filterModels:qe}),t)}))})]}),Object(a.jsx)("main",{className:"column is-main",children:Object(a.jsx)(Ue,{metrics:n.slice(v,h+1),models:qe(i,Object.entries(N).filter((function(e){return+Object(j.a)(e,1)[0]<v})).map((function(e){var t=Object(j.a)(e,2);t[0];return t[1]}))),onSubmit:function(e){var t=Object(j.a)(e,2),i=(t[0],t[1],Object.entries(N).reduce((function(e,t){var n=Object(j.a)(t,2),i=n[0],a=n[1];a.range;return!r[i]||r[i]&&r[i].range[0]!==a.range[0]&&r[i].range[1]!==a.range[1]?Object(b.a)(Object(b.a)({},e),{},Object(p.a)({},i,a)):e}),{}));f(i),d(!0);var a=n.length-(g-4)-3;u(a?g+1:7)},onPreviousStep:function(){u(g-1)},privacyVariables:o,onChange:function(e){var t,n=Object(j.a)(e,2),i=n[0],r=n[1];E(Object(b.a)(Object(b.a)({},N),{},(t={},Object(p.a)(t,v+"",i),Object(p.a)(t,h+"",r),t)))},values:N[v+""]&&N[h+""]?[N[v+""],N[h+""]]:void 0})})]})]}):null})),Xe=(n(210),n(94)),Ke=n.n(Xe)()();var Ye=Object(u.b)((function(e,t){return Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({},t),e),ce(e.ui)),K(e.data))}),(function(e){return Object(f.b)(Object(b.a)(Object(b.a)({},r),i),e)}))((function(e){var t,n=e.ui.currentStep,i=e.data,r=i.models,s=i.filters,o=i.choosenModel,l=i.privacyVariables,u=i.metricsOrder,d=e.setChoosenModel,f=e.step,O=e.setCurrentStep,v=e.previousStep,h=e.addFilters,_=Object(c.useState)(void 0),x=Object(j.a)(_,2),g=x[0],y=x[1],S=Object(c.useState)("similarity"),E=Object(j.a)(S,2),C=E[0],T=E[1],w=Object(c.useState)(void 0),k=Object(j.a)(w,2),R=k[0],V=k[1],I=Object(c.useState)(void 0),P=Object(j.a)(I,2),M=P[0],A=P[1],F=Object(c.useState)(30),D=Object(j.a)(F,2),L=D[0],q=D[1];return Object(c.useEffect)((function(){Ke.addEventListener("message",(function(e){"RPC"===e.data.type&&e.data.result&&(q(30),A(e.data.result))}))}),[]),Object(c.useEffect)((function(){A(void 0),n===f&&setTimeout((function(){Ke.getVisibleModels({models:r,filters:s,sortMode:C,metricsOrder:u})}))}),[s,C,u,n,f,r]),Object.keys(s).length?(M&&(t=N.a.reduce((function(e,t){var n=t.id,i=Object(Ie.a)(M,(function(e){return parseFloat(e[n]).toFixed(3)}));["disparate_impact"].includes(n)&&(i=Object(Ie.a)(r,(function(e){return Math.abs(1-+e[n])})));var a=Object(Pe.a)().domain(i).range(["red","green"]);return Object(b.a)(Object(b.a)({},e),{},Object(p.a)({},n,a))}),{})),Object(a.jsxs)("section",{className:"single-choice-screen",children:[Object(a.jsx)("h1",{className:"step-title",children:Oe("model_choice_screen_title")}),Object(a.jsxs)("div",{className:"columns-container",children:[Object(a.jsxs)("aside",{className:"column is-aside",children:[Object(a.jsx)("p",{className:"instructions",children:Oe("model_choice_screen_intro")}),Object(a.jsx)("div",{className:"",children:[[0,1],[1,2],[2,3]].filter((function(e){var t=Object(j.a)(e,2),n=t[0],i=t[1];return void 0!==s[n+""]&&void 0!==s[i+""]})).map((function(e,t){var n=Object(j.a)(e,2),i=n[0],c=n[1],l=[s[i+""],s[c+""]].find((function(e){return e&&e.variables}));return l=l?l.variables:void 0,Object(a.jsx)(He,Object(b.a)({},{index:t,filters:s,models:r,from:i,to:c,fromName:u.find((function(e){return e.id===s[i+""].variable})).name,toName:u.find((function(e){return e.id===s[c+""].variable})).name,variables:l,choosenModel:o,highlightedNodeId:R||g,addFilters:h,filterModels:qe}),t)}))})]}),Object(a.jsxs)("main",{className:"column is-main",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:Oe("sort_by")}),Object(a.jsxs)("select",{value:C,onChange:function(e){return T(e.target.value)},children:[Object(a.jsx)("option",{value:"similarity",children:Oe("similarity")}),u.map((function(e){var t=e.id,n=e.name;return Object(a.jsx)("option",{value:t,children:n},t)}))]})]}),M?Object(a.jsxs)("table",{className:"model-choice-table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{}),u.map((function(e){var t=e.name,n=e.id;return Object(a.jsx)("th",{children:Object(a.jsx)("span",{children:Object(a.jsx)("span",{children:t})})},n)}))]})}),Object(a.jsxs)("tbody",{onMouseLeave:function(){V(void 0)},children:[M.slice(0,L).map((function(e){return Object(a.jsxs)("tr",{onMouseOver:function(){V(e.id)},onClick:function(){e.id===g?(d(e),O(n+1)):y(e.id)},className:oe()("model-row",{"is-active":o?e.id===R||e.id===o.id:e.id===R,"is-selected":e.id===g}),children:[Object(a.jsx)("th",{children:Object(a.jsx)("button",{children:e.id===g?Oe("validate"):Oe("select_model")})}),u.map((function(n){var i=n.name,r=n.id,c=(+e[r]).toFixed(2);"privacy"===r&&(c=-e.variables.filter((function(e){return l[e]})).length);var s=i+" : "+c;return"interpretability"===r&&(s=i+" : "+(c=parseInt(c))+"<br/> variables utilis\xe9es : "+e.variables.join(", ")),Object(a.jsx)("th",{"data-for":"table-tooltip","data-tip":s,"data-html":!0,style:{background:"disparate_impact"===r?t[r](Math.abs(1-parseFloat(e[r]).toFixed(3))):t[r](parseFloat(e[r]).toFixed(3))},children:c},r)})),Object(a.jsx)(m.a,{id:"table-tooltip"})]},e.id)})),L<M.length?Object(a.jsx)("div",{className:"view-more-container",children:Object(a.jsxs)("button",{className:"view-more-btn",onClick:function(){q(L+30)},children:[Oe("show_more_models")," (",M.length-L," ",Oe("not_displayed"),")"]})}):null]})]}):Object(a.jsx)("div",{className:"loading ".concat(n===f?"is-active":""),children:Object(a.jsx)("div",{children:Oe("loading")})})]}),Object(a.jsx)(ve,{disabled:!g,onSubmit:function(){g&&(d(r.find((function(e){return e.id===g}))),O(n+1))},onSetCurrentStep:O,currentStep:n,onPreviousStep:function(){return O(v)},backwardEnabled:!0})]})]})):null})),Ge={history:[]};var Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Ge;case w:case R:case I:case V:case Y:case Z:case G:return Object(b.a)(Object(b.a)({},e),{},{history:[].concat(Object(h.a)(e.history),[{action:t,date:new Date}])});default:return e}},Qe=Object(O.a)({history:function(e){return e.history}}),Ze=n(95),$e=n.n(Ze);function et(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"txt",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"download";switch(n){case"zip":t="octet/stream";break;case"html":t="text/html;charset=utf-8";break;default:t="text/plain;charset=utf-8"}var r=new Blob([e],{type:t});$e.a.saveAs(r,"".concat(i,".").concat(n))}n(212);var tt=function(e){switch(e){case 0:return Oe("app_header_view");case 2:return Oe("metrics_sorting_view");case 3:return Oe("main_filter_view");case 4:return Oe("secondary_filter_view");case 5:return Oe("tertiary_filter_view");case 7:return Oe("model_choice_view");case 8:return Oe("conclusion_view");default:return""}},nt={START_APP:{payload:function(){return{}},description:function(e){return Oe("started_the_app")}},SET_METRICS_ORDER:{payload:function(e){return{new_order:e.map((function(e){return e.id})).join(", ")}},description:function(e){return Oe("changed_metrics_order_to")+" "+e.map((function(e,t){return t+1+"/ "+e.name})).join(", ")}},ADD_FILTERS:{payload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(0===Object.entries(e).length)return 0;if(1===Object.entries(e).length){var t=Object.entries(e),n=Object(j.a)(t,1),i=Object(j.a)(n[0],2),r=(i[0],i[1]),a=r.variable,c=r.range;return{filter1_type:a,filter1_value:c.join(", ")}}var s=Object.entries(e),o=Object(j.a)(s,2),l=Object(j.a)(o[0],2),u=(l[0],l[1]),d=u.variable,b=u.range,p=Object(j.a)(o[1],2),f=(p[0],p[1]),m=f.variable,O=f.range;return{filter1_type:d,filter1_value:b.join(", "),filter2_type:m,filter2_value:O.join(", ")}},description:function(e){return Oe("add_filters")+" "+Object.entries(e).map((function(e){var t=Object(j.a)(e,2),n=(t[0],t[1]);return"".concat(n.variable," (entre ").concat(n.range[0]," et ").concat(n.range[1],")")})).join(" "+Oe("and")+" ")}},SET_DATAIKU_RESULTS:{payload:function(){return{}},description:function(){return Oe("set_dataiku_results")}},SET_ITERATION_NUMBER:{payload:function(e){return e},description:function(e){return Oe("set_iteration_number")+(+e+1)}},SET_CHOOSEN_MODEL:{payload:function(e){return{choosen_model:e.variables.join("/")}},description:function(e){return Oe("set_choosen_model")+" : "+e.variables.join("/")}},SET_CURRENT_STEP:{payload:function(e){return{step:tt(e)}},description:function(e){return Oe("navigated_to")+" "+tt(e)}}};var it=function(e){var t=e.history,n=void 0===t?[]:t,i=function(e,t,n){return nt[e.type]?nt[e.type].description(e.payload):"nope"},r="id;heure;resume;type;new_order;filter1_type;filter1_value;filter2_type;filter2_value;choosen_model;step\n".concat(n.map((function(e,t){var n=e.action,r=e.date,a=i(n),c=function(e){return nt[e.type]?nt[e.type].payload(e.payload):"nope"}(n),s=c.new_order,o=void 0===s?"":s,l=c.filter1_type,u=void 0===l?"":l,d=c.filter1_value,b=void 0===d?"":d,j=c.filter2_type,p=void 0===j?"":j,f=c.filter2_value,m=void 0===f?"":f,O=c.choosen_model,v=void 0===O?"":O,h=c.step,_=void 0===h?"":h;return"id;".concat(new Date(r).toLocaleTimeString(),";").concat(a,";").concat(n.type,";").concat(o,";").concat(u,";").concat(b,";").concat(p,";").concat(m,";").concat(v,";").concat(_)})).join("\n"));return Object(a.jsxs)("div",{className:"history",children:[Object(a.jsx)("ul",{className:"history-details",children:n.filter((function(e){var t=e.action;return!["START_APP","SET_CURRENT_STEP","SET_DATAIKU_RESULTS"].includes(t.type)})).map((function(e,t){var n=e.action,r=e.date;return Object(a.jsxs)("li",{className:"history-item",children:[Object(a.jsx)("div",{className:"date-container",children:Object(a.jsx)("code",{children:new Date(r).toLocaleTimeString()})}),Object(a.jsx)("div",{children:i(n)})]},t)}))}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:function(){return et(r,"csv","history")},children:Oe("download_history")})})]})},rt=n(14),at=n(39),ct=n(15),st=n(28),ot=n(63),lt=function(e){Object(ct.a)(n,e);var t=Object(st.a)(n);function n(e){var i;Object(rt.a)(this,n),(i=t.call(this,e)).componentWillReceiveProps=function(e){i.props.value!==e.value&&i.setState({value:e.value}),i.props.delay!==e.delay&&(i.setState({delay:e.delay}),i.onChange=Object(ot.debounce)(i.onChange,e.delay))},i.onChange=function(e){i.props.onChange(e)},i.handleChange=function(e){var t=e.target.value;i.setState({value:t}),i.onChange(e)},i.render=function(){var e=Object(at.a)(i),t=e.state.value,n=e.props.placeholder,r=e.handleChange;return Object(a.jsx)("input",{className:"input",type:"text",placeholder:n,value:t,onChange:r})};var r=e.delay||500;return i.state={value:e.value,delay:r},i.onChange=Object(ot.debounce)(i.onChange,r),i}return n}(c.Component);var ut=Object(u.b)((function(e,t){return Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({},t),e),ce(e.ui)),K(e.data)),Qe(e.history))}),(function(e){return Object(f.b)(Object(b.a)(Object(b.a)({},r),i),e)}))((function(e){var t=e.data,n=t.dataikuResults,i=t.choosenModel,r=(t.filters,t.privacyVariables),c=t.metricsOrder,s=t.previousModel,o=e.ui.iterationNumber,l=e.history,u=e.resetApp,d=e.setCurrentStep,j=e.setIterationNumber,f=e.setMetricsOrder,O=e.setDataikuResults,v=e.setPreviousModel;if(!i)return null;var _="source;".concat(N.a.map((function(e){return e.name})).join(";"),";variables consid\xe9r\xe9es comme priv\xe9es\ndataiku;").concat(N.a.map((function(e){var t=e.id;return n[t]})).join(";"),";\ninterface;").concat(N.a.map((function(e){var t=e.id;e.name;return"Privacy"===t?-Object.keys(r).filter((function(e){return r[e]})).length:i[t]})).join(";"),";").concat(Object.keys(r).filter((function(e){return r[e]})).join(", "));return Object(a.jsxs)("section",{className:"single-choice-screen",children:[Object(a.jsx)("h1",{className:"step-title",children:Oe("conclusion_screen_title")}),Object(a.jsxs)("div",{className:"step-section",children:[Object(a.jsxs)("p",{children:["Le mod\xe8le que vous avez choisi utilise les dimensions suivantes pour prendre une d\xe9cision :"," ",i.variables.map((function(e){return C.a.find((function(t){return t.id===e})).name})).map((function(e){return Object(a.jsx)("strong",{children:e})})).reduce((function(e,t,n){return[].concat(Object(h.a)(e),[0===n?null:", ",t])}),[]),"."]}),Object(a.jsx)("h2",{children:Oe(0===o?"conclusion_results_title":"conclusion_results_title_bis")}),Object(a.jsx)("table",{className:"results-table",children:Object(a.jsx)("tbody",{children:c.map((function(e){var t=e.name,c=e.id,o=e.short_description,l=Se[c],u=s||n,d=+u[c];d=+(d=void 0!==d&&d.toFixed?d.toFixed(3):d);var j=u[c];["privacy","interpretability"].includes(c)&&(j=-j);var f,m="privacy"===c?-Object.keys(r).filter((function(e){return r[e]})).length:i[c];m=+(m=(m=+m).toFixed?m.toFixed(3):m),c.includes(["disparate"])&&(f=d>1?d<m?"-1":m>1?"1":"-1":d>m?"-1":"1"),f=m>d?"1":m<d?"-1":"0",["fairness_accuracy"].includes(c)&&(f=-+f+"");return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:Object(a.jsx)("span",{className:"tag metric-name",style:{background:l},children:Object(a.jsxs)("span",{children:[t,Object(a.jsx)(Ce,{tip:o,"data-place":"right","data-effect":"solid"})]})})}),Object(a.jsx)("th",{children:Object(a.jsx)("span",{className:"tag",style:{background:"grey"},children:Object(a.jsx)("form",{children:void 0!==s&&s[c]?Object(a.jsx)("span",{children:d}):Object(a.jsx)(lt,{placeholder:"entrez vous r\xe9sultats pour la m\xe9trique ".concat(c),value:u[c]||"",onChange:function(e){var t=e.target.value.replace(",",".");O(Object(b.a)(Object(b.a)({},n),{},Object(p.a)({},c,t)))}})})})}),Object(a.jsx)("th",{children:"\u2192"}),Object(a.jsx)("th",{children:Object(a.jsx)("span",{className:"tag",style:{background:{1:"green","-1":"red",0:"grey"}[f]},children:m})}),Object(a.jsx)("th",{children:void 0===j||isNaN(j)?"pas de valeur \xe0 comparer":{1:"Vous avez am\xe9lior\xe9 cet indicateur","-1":"Vous avez d\xe9grad\xe9 cet indicateur",0:"Cet indicateur est rest\xe9 identique"}[f]})]},c)}))})}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:function(){return et(_,"csv","modeles_expe")},children:Oe("download")})})]}),Object(a.jsxs)("div",{className:"step-section",children:[Object(a.jsx)("h2",{children:Oe("conclusion_history_title")}),Object(a.jsx)(it,{history:l})]}),Object(a.jsxs)("div",{className:"provocation-image-container-in-conclusion",children:[Object(a.jsx)("h1",{children:me.a.provocation_intro}),xe.a.filter((function(e){return e.iteration===o+1})).map((function(e){var t=e.id,n=e.src;return Object(a.jsx)("img",{src:"".concat("/exp-ai","/images/").concat(n),alt:t},n)}))]}),o<=1?Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:function(){j(o+1),f(Object(h.a)(N.a.filter((function(e){return e.iteration<=o+1})))),v(i),d(2)},children:Oe("new_iteration")})}):Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:function(){u(),j(0),d(2)},children:Oe("restart")})}),Object(a.jsx)(m.a,{})]})}));var dt=Object(u.b)((function(e,t){return Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({},t),e),ce(e.ui)),K(e.data))}),(function(e){return Object(f.b)(Object(b.a)(Object(b.a)({},r),i),e)}))((function(e){var t,n=e.ui,i=n.currentStep,r=n.metricsOrderIsValidated,s=n.iterationNumber,o=e.data,l=o.filters,u=o.choosenModel,d=e.setCurrentStep,f=e.startApp,O=e.getData;Object(c.useEffect)((function(){f(),O()}),[f,O]);var v=(t={},Object(p.a)(t,0,{renderStep:function(){return Object(a.jsx)(he,{})},title:Oe("home")}),Object(p.a)(t,1,{renderStep:function(){return Object(a.jsx)(ge,{})},title:Oe("provocation")}),Object(p.a)(t,2,{renderStep:function(){return Object(a.jsx)(Ee,{})},title:Oe("metrics-sorting")}),Object(p.a)(t,3,{renderStep:function(){return Object(a.jsx)(ze,{})},title:Oe("main-choice"),disabled:!r}),Object(p.a)(t,4,{renderStep:function(){return Object.keys(l).length<2?null:Object(a.jsx)(We,{nextStep:0===s?7:5,metricsExtent:[1,2],previousExtents:[[0,1]]})},title:Oe("secondary-choice")+" 1",disabled:!r||Object.keys(l).length<2}),Object(p.a)(t,5,{renderStep:function(){return Object(a.jsx)(We,{nextStep:7,previousExtents:[[0,1],[1,2]],metricsExtent:[2,3]})},title:Oe("secondary-choice")+" 2",disabled:!r}),Object(p.a)(t,7,{renderStep:function(){return Object.keys(l).length<2?null:Object(a.jsx)(Ye,{step:7,previousStep:0===s?4:5})},title:Oe("model-choice"),disabled:!r}),Object(p.a)(t,8,{renderStep:function(){return Object(a.jsx)(ut,{})},title:Oe("conclusion"),disabled:!r||!u}),t);return Object(a.jsxs)("div",{className:"container",children:[Object.entries(v).map((function(e){var t=Object(j.a)(e,2),n=t[0],r=t[1].renderStep;return Object(a.jsx)(be,{active:+n===i,children:r()},n)})),Object(a.jsx)(le,Object(b.a)({},{currentStep:i,setCurrentStep:d,steps:v})),Object(a.jsx)(m.a,{id:"tooltip"})]})})),bt=n(45),jt=Object(bt.rememberReducer)(Object(f.c)({data:X,history:Je,ui:ae})),pt=function(){return function(e){var t=e.dispatch,n=e.getState;return function(e){return function(i){if("function"===typeof i)return i(t,n);var r=i.promise,a=i.type,c=Object(ue.a)(i,["promise","type"]);if(!r)return e(i);if("function"!==typeof r||!Promise.resolve(r))return console.warn('passed an action with a "promise" prop which is not a promise function, action:',i),e(i);var s="".concat(a,"_PENDING"),o="".concat(a,"_SUCCESS"),l="".concat(a,"_FAIL"),u="".concat(a,"_RESET");return e(Object(b.a)(Object(b.a)({},c),{},{type:s})),r(t,n).then((function(t){return setTimeout((function(){return e(Object(b.a)(Object(b.a)({},c),{},{type:u}))}),1e3),e(Object(b.a)(Object(b.a)({},c),{},{result:t,type:o}))})).catch((function(t){return e(Object(b.a)(Object(b.a)({},c),{},{error:t,type:l}))}))}}}};var ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(f.a)(pt()),n=window.__REDUX_DEVTOOLS_EXTENSION__?Object(f.d)(t,window.__REDUX_DEVTOOLS_EXTENSION__(),Object(bt.rememberEnhancer)(window.localStorage,["ui","data","history"]))(f.e):Object(f.d)(t,Object(bt.rememberEnhancer)(window.localStorage,["ui","data","history"]))(f.e),i=n(jt,e);return i}({});var mt=function(){return Object(a.jsxs)(u.a,{store:ft,children:[Object(a.jsx)(d.a,{children:Object(a.jsx)("title",{children:Oe("site_title")})}),Object(a.jsx)(dt,{})]})},Ot=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,227)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),a(e),c(e)}))};l.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(mt,{})}),document.getElementById("root")),Ot()},38:function(e,t){e.exports=[{id:"age",name:"age",description:null,relates_to_privacy:!1},{id:"credit_history",name:"historique de remboursement des cr\xe9dits pass\xe9s dans la m\xeame banque",description:null,relates_to_privacy:!1},{id:"foreign_worker",name:"travailleur \xe9tranger",description:null,relates_to_privacy:!1},{id:"housing",name:"logement",description:null,relates_to_privacy:!1},{id:"installment_as_income_perc",name:"part de la mensualit\xe9 de remboursement sur le salaire mensuel",description:null,relates_to_privacy:!1},{id:"other_debtors",name:"pr\xe9sence de dettes dans d'autres banques",description:null,relates_to_privacy:!1},{id:"personal._status",name:"c\xe9libataire / mari\xe9",description:null,relates_to_privacy:!1},{id:"present_emp_since",name:"emploi actuel depuis",description:null,relates_to_privacy:!1},{id:"property",name:"patrimoine",description:null,relates_to_privacy:!1},{id:"telephone",name:"t\xe9l\xe9phone",description:null,relates_to_privacy:!1},{id:"account_check_status",name:"montant dans le compte courant",description:null,relates_to_privacy:!1},{id:"credits_this_bank",name:"nombre de cr\xe9dits pr\xe9c\xe9dents souscrits dans cette m\xeame banque",description:null,relates_to_privacy:!1},{id:"other_installment_plans",name:"autres projets d'investissements en cours",description:null,relates_to_privacy:!1},{id:"sex",name:"sexe",description:null,relates_to_privacy:!1},{id:"credit_amount",name:"montant du cr\xe9dit",description:null,relates_to_privacy:!1},{id:"savings",name:"\xe9pargnes",description:null,relates_to_privacy:!1},{id:"people_under_maintenance",name:"personnes \xe0 charge",description:null,relates_to_privacy:!1},{id:"present_res_since",name:"r\xe9sidence actuelle depuis",description:null,relates_to_privacy:!1},{id:"job",name:"emploi",description:null,relates_to_privacy:!1},{id:"duration_in_month",name:"dur\xe9e en mois du cr\xe9dit",description:null,relates_to_privacy:!1},{id:"purpose",name:"objectif",description:null,relates_to_privacy:!1}]},44:function(e,t){e.exports={site_title:"Pratiques de l'IA",step:"\xe9tape",next_step:"continuer",previous_step:"retour",validate:"valider",step_1_title:"\xc9tape 1 : sans l'interface",step_2_title:"\xc9tape 2 : la l\xe9gislation europ\xe9enne",step_3_title:"\xc9tape 3 : mesurer l'\xe9thique ?",sort_screen_title:"Classer les indicateurs",sort_screen_prompt:"Veuillez classer les indicateurs dans l'ordre qui vous semble \xeatre celui du plus important au moins important.",sort_screen_prompt_details:"Vous pouvez faire glisser les cartes dans l'ordre d\xe9sir\xe9.",main_choice_screen_title:"S\xe9lectionner des mod\xe8les dans les deux dimensions les plus importantes",main_choice_screen_intro:"Veuillez s\xe9lectionner des mod\xe8les \xe0 partir des deux indicateurs que vous avez d\xe9finis comme les plus importants.",second_choice_screen_title:"S\xe9lectionner des mod\xe8les dans les autres dimensions",second_choice_screen_intro:"Veuillez s\xe9lectionner des mod\xe8les \xe0 partir des filtrages pr\xe9c\xe9dents.",model_choice_screen_title:"Choisir un mod\xe8le",model_choice_screen_intro:"Parmi les mod\xe8les qui correspondent aux arbitrages r\xe9alis\xe9s pr\xe9c\xe9demment (rappel\xe9s ci-dessous), veuillez s\xe9lectionner le mod\xe8le qui correspond le mieux \xe0 une prise de d\xe9cision \xe9thique. Chaque ligne correspond \xe0 un mod\xe8le dont les caract\xe9ristiques sont rappel\xe9es sur chaque colonne.",dataiku_input_screen_title:"Avant de voir vos r\xe9sultats, entrez les m\xe9triques de votre premi\xe8re exp\xe9rience",dataiku_input_screen_intro:"Veuillez renseigner les informations pour les m\xe9triques fournies.",conclusion_screen_title:"Conclusion",conclusion_results_title:"Votre \xe9volution depuis l'\xe9tape dataiku",conclusion_results_title_bis:"Votre \xe9volution par rapport \xe0 l'it\xe9ration pr\xe9c\xe9dente",conclusion_history_title:"Votre cheminement",restart:"Recommencer l'exp\xe9rience",navigated_to:"A navigu\xe9 sur",add_filters:"A ajout\xe9 des filtres pour les indicateurs",app_header_view:"l'accueil",dataiku_practice_view:"la vue d\xe9di\xe9e \xe0 la phase d'exp\xe9rimentation avec dataiku",eu_legislation_view:"la vue d\xe9di\xe9e \xe0 la legislation europ\xe9enne",metrics_explanation_view:"la vue d\xe9di\xe9e \xe0 l'explication des indicateurs",metrics_sorting_view:"la vue d\xe9di\xe9e \xe0 l'ordonnancement des indicateurs",main_filter_view:"la vue d\xe9di\xe9e au filtre principal",secondary_filter_view:"la vue d\xe9di\xe9e au filtre secondaire",tertiary_filter_view:"la vue d\xe9di\xe9e au filtre tertiaire",model_choice_view:"la vue d\xe9di\xe9e au choix du mod\xe8le",dataiku_feedback_view:"la vue d\xe9di\xe9e \xe0 entrer les informations dataiku",conclusion_view:"la vue de conclusion",set_choosen_model:"A choisi son mod\xe8le",set_dataiku_results:"A entr\xe9 les r\xe9sultats obtenus via dataiku",changed_metrics_order_to:"A chang\xe9 l'ordre des indicateurs pour",started_the_app:"A commenc\xe9 l'exp\xe9rimentation",and:"et",download:"t\xe9l\xe9charger",download_history:"t\xe9l\xe9charger l'historique",first_model_dataiku:"Premier mod\xe8le issu de l'exp\xe9rience avec Dataiku",second_model_choosen:"Second mod\xe8le issu de l'exp\xe9rience avec cette interface",performance:"Performance",disparate_impact:"Disparate impact sur le genre",errors_distribution:"Distribution des erreurs entre hommes et femmes",privacy:"Privacy",interpretability:"Interpr\xe9tabilit\xe9",dataiku_results_label:"Votre score issu de l'\xe9tape 1 sans l'interface",privacy_prompt:"D\xe9finissez les variables qui rel\xe8vent de la privacy selon vous",home:"accueil","intro-dataiku":"\xc9tape 1 - exp\xe9rience sans l'interface","intro-eu":"Principes de l'Union Europ\xe9enne","metrics-sorting":"Classement des m\xe9triques","main-choice":"Arbitrage principal","secondary-choice":"Arbitrage secondaire","model-choice":"Choix du mod\xe8le",conclusion:"Conclusion","intro-metrics":"Introduction aux m\xe9triques","show-descriptions":"montrer les descriptions des m\xe9triques",move_up:"remonter",move_down:"descendre",select_model:"s\xe9lectionner",dataiku_results_label_for_performance:"Votre indicateur de performance sans l'interface",dataiku_results_label_for_privacy:"Nombre de variables priv\xe9es utilis\xe9es sans l'interface",dataiku_results_label_for_disparate_impact:"Votre indicateur de disparate impact sans l'interface",dataiku_results_label_for_errors_distribution:"Votre indicateur de distribution des erreurs sans l'interface",dataiku_results_label_for_interpretability:"Nombre de variables utilis\xe9es sans l'interface",similarity:"Similarit\xe9",sort_by:"Trier les mod\xe8les s\xe9lectionn\xe9s par",no_value:"pas de valeur",loading:"Chargement",show_more_models:"montrer plus de mod\xe8les",not_displayed:"non affich\xe9s",new_iteration:"S'\xe9quiper avec de nouvelles m\xe9triques",set_iteration_number:"A commenc\xe9 l'it\xe9ration n\xb0",provocation_intro:"Quand soudain ..."}},52:function(e,t){e.exports=[{id:"femme",src:"objection-femme.svg",iteration:0},{id:"etrangers",src:"objection-etrangers.svg",iteration:1},{id:"interpratibilite",src:"objection-interpretabilite.svg",iteration:2},{id:"misogyne",src:"objection-misogyne.svg",iteration:3},{id:"datascientists",src:"objection-datascientists.svg",iteration:3},{id:"algo",src:"objection-algo.svg",iteration:3}]},94:function(e,t,n){var i=n(211),r=["getVisibleModels"];e.exports=function(){var e=new Worker(n.p+"7766f6dd491621912ca7.worker.js",{name:"[hash].worker.js"});return i(e,r),e}}},[[214,1,2]]]);
//# sourceMappingURL=main.f2bd8551.chunk.js.map